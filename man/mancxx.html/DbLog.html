<HTML>
<HEAD>
<TITLE>DbLog</TITLE>
</HEAD>
<BODY>
<H1>DbLog</H1>
<HR>
<PRE>

</PRE>
<H2>NAME</H2><PRE>
       DbLog - log management class


</PRE>
<H2>SYNOPSIS</H2><PRE>
       <STRONG>#include</STRONG> <STRONG>&lt;db_cxx.h&gt;</STRONG>

       <STRONG>static</STRONG> <STRONG>int</STRONG>
       <STRONG>DbLog::open(const</STRONG> <STRONG>char</STRONG> <STRONG>*dir,</STRONG>
            <STRONG>int</STRONG> <STRONG>flags,</STRONG> <STRONG>int</STRONG> <STRONG>mode,</STRONG> <STRONG>DbEnv</STRONG> <STRONG>*dbenv,</STRONG> <STRONG>DbLog</STRONG> <STRONG>**regionp);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::close();</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::flush(const</STRONG> <STRONG>DbLsn</STRONG> <STRONG>*lsn);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::get(DbLsn</STRONG> <STRONG>*lsn,</STRONG> <STRONG>Dbt</STRONG> <STRONG>*data,</STRONG> <STRONG>int</STRONG> <STRONG>flags);</STRONG>

       <STRONG>static</STRONG> <STRONG>int</STRONG>
       <STRONG>DbLog::compare(const</STRONG> <STRONG>DbLsn</STRONG> <STRONG>*lsn0,</STRONG> <STRONG>const</STRONG> <STRONG>DbLsn</STRONG> <STRONG>*lsn1);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::file(const</STRONG> <STRONG>DbLsn</STRONG> <STRONG>*lsn,</STRONG> <STRONG>char</STRONG> <STRONG>*namep,</STRONG> <STRONG>size_t</STRONG> <STRONG>len);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::put(DbLsn</STRONG> <STRONG>*lsn,</STRONG> <STRONG>const</STRONG> <STRONG>Dbt</STRONG> <STRONG>*data,</STRONG> <STRONG>int</STRONG> <STRONG>flags);</STRONG>

       <STRONG>static</STRONG> <STRONG>int</STRONG>
       <STRONG>DbLog::unlink(const</STRONG> <STRONG>char</STRONG> <STRONG>*dir,</STRONG> <STRONG>int</STRONG> <STRONG>force,</STRONG> <STRONG>DbEnv</STRONG> <STRONG>*);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::archive(char</STRONG> <STRONG>**list[],</STRONG>
            <STRONG>int</STRONG> <STRONG>flags,</STRONG> <STRONG>void</STRONG> <STRONG>*(*db_malloc)(size_t));</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::db_register(const</STRONG> <STRONG>Db</STRONG> <STRONG>*dbp,</STRONG>
            <STRONG>const</STRONG> <STRONG>char</STRONG> <STRONG>*name,</STRONG> <STRONG>DBTYPE</STRONG> <STRONG>type,</STRONG> <STRONG>u_int32_t</STRONG> <STRONG>*fidp);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::db_unregister(u_int32_t</STRONG> <STRONG>fid);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLog::stat(DB_LOG_STAT</STRONG> <STRONG>**spp,</STRONG> <STRONG>void</STRONG> <STRONG>*(*db_malloc)(size_t));</STRONG>


</PRE>
<H2>DESCRIPTION</H2><PRE>
       The DB library is a family of classes that provides a mod-
       ular programming interface to transactions and record-ori-
       ented  file  access.   The  library  includes  support for
       transactions, locking, logging and file page  caching,  as
       well  as  various  indexed  access  methods.   Many of the
       classes (e.g., the file page  caching  class)  are  useful
       independent of the other DB classes, although some classes
       are explicitly based on other classes (e.g.,  transactions
       append-only file, with records identified and accessed via
       <EM>DbLsn</EM>'s (database log sequence numbers).

       DbLsn's are returned on  each  <EM>DbLog::put</EM>  operation,  and
       only  those  DbLsn's  returned  by <EM>DbLog::put</EM> can later be
       used to retrieve records from the log.

  <EM>DbLog::open</EM>
       The <EM>DbLog::open</EM> method copies a pointer, to the log  iden-
       tified by the <STRONG>directory</STRONG> <EM>dir</EM>, into the memory location ref-
       erenced by <EM>regionp</EM>.

       If the <EM>dbenv</EM> argument to <EM>DbLog::open</EM> was initialized using
       <EM>DbEnv::appinit</EM>,   <EM>dir</EM>   is  interpreted  as  described  by
       <STRONG><A HREF="DbEnv.html">DbEnv(3)</A></STRONG>.

       Otherwise, if <EM>dir</EM> is not NULL, it is interpreted  relative
       to  the  current working directory of the process.  If <EM>dir</EM>
       is NULL, the following environment variables  are  checked
       in  order:  ``TMPDIR'',  ``TEMP'', and ``TMP''.  If one of
       them is set, log files are created relative to the  direc-
       tory  it  specifies.   If  none of them are set, the first
       possible  one  of  the  following  directories  is   used:
       <EM>/var/tmp</EM>, <EM>/usr/tmp</EM>, <EM>/temp</EM>, <EM>/tmp</EM>, <EM>C:/temp</EM> and <EM>C:/tmp</EM>.

       All  files  associated  with  the  log are created in this
       directory.  This directory  must  already  exist  when  <EM>is</EM>
       <EM>called.</EM>   If the log already exists, the process must have
       permission to read and write the existing files.   If  the
       log  does  not already exist, it is optionally created and
       initialized.

       If the log region is  being  created  and  log  files  are
       already  present, the log files are ``recovered'' and sub-
       sequent log writes are appended to the end of the log.

       The log is stored in one or more files  in  the  specified
       directory.  Each file is named using the format

            log.NNNNN

       where  ``NNNNN'' is the sequence number of the file within
       the log.

       The <EM>flags</EM> and <EM>mode</EM> arguments specify  how  files  will  be
       opened  and/or created when they don't already exist.  The
       flags value is specified by <STRONG>or</STRONG>'ing together one or more of
       the following values:

       DB_CREATE
            Create  any  underlying  files, as necessary.  If the
            files do not already exist and the DB_CREATE flag  is
            not specified, the call will fail.

       The  logging  subsystem  is  configured based on which set
       methods have been used.  It is expected that  applications
       will  use  a single DbEnv object as the argument to all of
       the subsystems in the DB package.  The fields of the DbEnv
       object used by <EM>DbLog::open</EM> are described below.  As refer-
       ences  to  the  DbEnv  object   may   be   maintained   by
       <EM>DbLog::open</EM>,  it  is  necessary  that the DbEnv object and
       memory  it  references  be  valid  until  the  object   is
       destroyed.   Any  of the DbEnv fields that are not explic-
       itly set will default to appropriate values.

       The following fields in the DbEnv object may  be  initial-
       ized,  using  the  appropriate  set method, before calling
       <EM>DbLog::open</EM>:


       void *(*db_errcall)(char *db_errpfx, char *buffer);
       FILE *db_errfile;
       const char *db_errpfx;
       class ostream *db_error_stream;
       int db_verbose;
            The error fields of the DbEnv behave as described for
            <STRONG><A HREF="DbEnv.html">DbEnv(3)</A></STRONG>.

       u_int32_t lg_max;
            The  maximum  size  of  a  single  file  in  the log.
            Because DbLsn file offsets are unsigned  4-byte  val-
            ues,  <EM>lg</EM><STRONG>_</STRONG><EM>max</EM>  may  not  be  larger  than  the maximum
            unsigned 4-byte value.


            If <EM>lg</EM><STRONG>_</STRONG><EM>max</EM> is 0, a default value is used.

       The <EM>DbLog::open</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or  returns
       the value of <EM>errno</EM> on failure and 0 on success.

  <EM>DbLog::close</EM>
       The <EM>DbLog::close</EM> method closes the log associated with the
       DbLog object.

       In addition, if the <EM>dir</EM> argument to <EM>DbLog::open</EM>  was  NULL
       and  <EM>dbenv</EM>  was  not initialized using <EM>DbEnv::appinit</EM>, all
       files created for this shared region will be  removed,  as
       if <EM>DbLog::unlink</EM> were called.

       When  multiple  threads are using the DbLog handle concur-
       rently, only a single thread  may  call  the  <EM>DbLog::close</EM>
       method.

       The <EM>DbLog::close</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns
       the value of <EM>errno</EM> on failure and 0 on success.

  <EM>DbLog::flush</EM>
       The <EM>DbLog::flush</EM> method guarantees that  all  log  records
       The data field of the <EM>data</EM> object is  set  to  the  record
       retrieved and the size field indicates the number of bytes
       in the record.  See <STRONG><A HREF="Dbt.html">Dbt(3)</A></STRONG>  for  a  description  of  other
       fields  in  the  <EM>data</EM>  object.   <STRONG>When</STRONG> <STRONG>multiple</STRONG> <STRONG>threads</STRONG> <STRONG>are</STRONG>
       <STRONG>using</STRONG> <STRONG>the</STRONG> <STRONG>returned</STRONG> <STRONG>DbLog</STRONG> <STRONG>handle</STRONG> <STRONG>concurrently,</STRONG>  <STRONG>either</STRONG>  <STRONG>the</STRONG>
       <STRONG>DB_DBT_MALLOC</STRONG>  <STRONG>or</STRONG>  <STRONG>DB_DBT_USERMEM</STRONG>  <STRONG>flags</STRONG> <STRONG>must</STRONG> <STRONG>be</STRONG> <STRONG>specified</STRONG>
       <STRONG>for</STRONG> <STRONG>any</STRONG> <STRONG>Dbt</STRONG> <STRONG>used</STRONG> <STRONG>for</STRONG> <STRONG>data</STRONG> <STRONG>retrieval.</STRONG>

       The <EM>flags</EM> parameter must be set to exactly one of the fol-
       lowing values:

       DB_CHECKPOINT
            The  last  record written with the DB_CHECKPOINT flag
            specified to the <EM>DbLog::put</EM> method is returned in the
            <EM>data</EM>  argument.  The <EM>lsn</EM> argument is overwritten with
            the DbLsn of the record returned.  If no  record  has
            been  previously  written with the DB_CHECKPOINT flag
            specified, the first record in the log is returned.


            If the log is empty the <EM>DbLog::get</EM> method will return
            DB_NOTFOUND.

       DB_FIRST
            The  first  record from any of the log files found in
            the log directory is returned in the  <EM>data</EM>  argument.
            The <EM>lsn</EM> argument is overwritten with the DbLsn of the
            record returned.

            If the log is empty the <EM>DbLog::get</EM> method will return
            DB_NOTFOUND.

       DB_LAST
            The  last  record  in the log is returned in the <EM>data</EM>
            argument.  The <EM>lsn</EM> argument is overwritten  with  the
            DbLsn of the record returned.

            If  the  log  is  empty,  the  <EM>DbLog::get</EM> method will
            return DB_NOTFOUND.

       DB_NEXT
            The current log position  is  advanced  to  the  next
            record  in the log and that record is returned in the
            <EM>data</EM> argument.  The <EM>lsn</EM> argument is overwritten  with
            the DbLsn of the record returned.

            If the pointer has not been initialized via DB_FIRST,
            DB_LAST, DB_SET, DB_NEXT, or DB_PREV, <EM>DbLog::get</EM> will
            return  the first record in the log.  If the last log
            record has already been returned or the log is empty,
            the <EM>DbLog::get</EM> method will return DB_NOTFOUND.

            If  the  log  was opened with the DB_THREAD flag set,
            calls to <EM>DbLog::get</EM> with the DB_NEXT  flag  set  will
            the <EM>DbLog::get</EM> method will return DB_NOTFOUND.

            If the log was opened with the  DB_THREAD  flag  set,
            calls  to  <EM>DbLog::get</EM>  with the DB_PREV flag set will
            return EINVAL.

       DB_CURRENT
            Return the log record  currently  referenced  by  the
            log.

            If  the  log  pointer  has  not  been initialized via
            DB_FIRST, DB_LAST, DB_SET, DB_NEXT, or DB_PREV, or if
            the  log  was  opened  with  the  DB_THREAD flag set,
            <EM>DbLog::get</EM> will return EINVAL.

       DB_SET
            Retrieve the record specified by  the  <EM>lsn</EM>  argument.
            If  the  specified  DbLsn  is invalid (e.g., does not
            appear in the log) <EM>DbLog::get</EM> will return EINVAL.

       Otherwise, the <EM>DbLog::get</EM> method throws  a  <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>
       or returns the value of <EM>errno</EM> on failure and 0 on success.

  <EM>DbLog::compare</EM>
       The <EM>DbLog::compare</EM> method allows the caller to compare two
       DbLsn's.   <EM>DbLog::compare</EM> returns 0 if the two DbLsn's are
       equal, 1 if <EM>lsn0</EM> is greater than <EM>lsn1</EM>, and -1 if  <EM>lsn0</EM>  is
       less than <EM>lsn1</EM>.

  <EM>DbLog::file</EM>
       The  <EM>DbLog::file</EM>  method  maps DbLsn's to file names.  The
       <EM>DbLog::file</EM> method copies the name of the file  containing
       the  record  named  by <EM>lsn</EM> into the memory location refer-
       enced by <EM>namep</EM>.  (This mapping of DbLsn to file is  needed
       for  database  administration.  For example, a transaction
       manager typically records the earliest  DbLsn  needed  for
       restart,  and  the  database  administrator  may  want  to
       archive log files to tape when they contain  only  DbLsn's
       before the earliest one needed for restart.)

       The  <EM>len</EM>  argument  is  the  length of the <EM>namep</EM> buffer in
       bytes.  If <EM>namep</EM> is too  short  to  hold  the  file  name,
       <EM>DbLog::file</EM> will return ENOMEM.  Note, as described above,
       log file names are quite short, on the order of 10 charac-
       ters.

       The  <EM>DbLog::file</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns
       the value of <EM>errno</EM> on failure and 0 on success.

  <EM>DbLog::put</EM>
       The <EM>DbLog::put</EM> method appends records  to  the  log.   The
       DbLsn  of the put record is returned in the <EM>lsn</EM> parameter.
       The <EM>flags</EM> parameter may be set to  one  of  the  following
       values:
            Db (3)).

       The caller is  responsible  for  providing  any  necessary
       structure to <EM>data</EM>.  (For example, in a write-ahead logging
       protocol, the application must  understand  what  part  of
       <EM>data</EM>  is an operation code, what part is redo information,
       and what part is  undo  information.   In  addition,  most
       transaction  managers  will store in <EM>data</EM> the DbLsn of the
       previous log record for the same transaction,  to  support
       chaining back through the transaction's log records during
       undo.)

       The <EM>DbLog::put</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or  returns
       the value of <EM>errno</EM> on failure and 0 on success.


  <EM>DbLog::unlink</EM>
       The  <EM>DbLog::unlink</EM>  method destroys the log region identi-
       fied by the directory <EM>dir</EM>,  removing  all  files  used  to
       implement  the  log  region.   (The  directory  <EM>dir</EM> is not
       removed.)   If  there  are  processes  that  have   called
       <EM>DbLog::open</EM>  without calling <EM>DbLog::close</EM> (i.e., there are
       processes currently using the log  region),  <EM>DbLog::unlink</EM>
       will fail without further action, unless the force flag is
       set, in which case <EM>DbLog::unlink</EM> will  attempt  to  remove
       the  log  region  files  regardless of any processes still
       using the log region.

       The result of attempting to forcibly  destroy  the  region
       when  a  process has the region open is unspecified.  Pro-
       cesses using a shared memory region maintain an open  file
       descriptor  for  it.   On UNIX systems, the region removal
       should succeed and processes that have already joined  the
       region  should  continue  to  run  in  the  region without
       change, however  processes  attempting  to  join  the  log
       region will either fail or attempt to create a new region.
       On other systems, e.g., WNT, where  the  <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>  system
       call  will fail if any process has an open file descriptor
       for the file, the region removal will fail.

       In the case of catastrophic or  system  failure,  database
       recovery  must  be  performed  (see  <STRONG><A HREF="db_recovery.html">db_recovery(1)</A></STRONG> or the
       DB_RECOVER flags to <EM>DbEnv::</EM><STRONG><A HREF="appinit.html">appinit(3)</A></STRONG>).  Alternatively, if
       recovery  is  not  required  because  no database state is
       maintained across failures, it is possible to clean  up  a
       log  region  by removing all of the files in the directory
       specified to the <EM>DbLog::open</EM> method, as log  region  files
       are  never  created  in  any  directory other than the one
       specified to <EM>DbLog::open</EM>.  Note, however,  that  this  has
       the  potential  to  remove  files  created by the other DB
       subsystems in this database environment.

       The  <EM>DbLog::unlink</EM>  method  throws  a  <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>   or
       returns the value of <EM>errno</EM> on failure and 0 on success.

       Arrays of log file names are created in allocated  memory.
       If  <EM>db</EM><STRONG>_</STRONG><EM>malloc</EM>  is  non-NULL,  it is called to allocate the
       memory, otherwise, the library function <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG> is used.
       The  function <EM>db</EM><STRONG>_</STRONG><EM>malloc</EM> must match the calling conventions
       of the <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG> library routine.  Regardless, the  caller
       is  responsible  for deallocating the returned memory.  To
       deallocate the returned memory, free each returned  memory
       pointer;  pointers  inside  the  memory  do not need to be
       individually freed.

       The <EM>flags</EM> argument is specified by <STRONG>or</STRONG>'ing together one  or
       more of the following values:

       DB_ARCH_ABS
            All  pathnames  are  returned  as absolute pathnames,
            instead of relative to the database home directory.

       DB_ARCH_DATA
            Return the database files that need to be archived in
            order to recover the database from catastrophic fail-
            ure.  If any of the  database  files  have  not  been
            accessed  during  the  lifetime  of  the  current log
            files, <EM>DbLog::archive</EM> will not include them  in  this
            list.   It  is  also  possible that some of the files
            referenced in the log have since  been  deleted  from
            the system.

       DB_ARCH_LOG
            Return  all  the log file names regardless of whether
            or not they are in use.

       The DB_ARCH_DATA and DB_ARCH_LOG flags are mutually exclu-
       sive.

       The  <EM>DbLog::archive</EM>  method  throws  a  <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or
       returns the value of <EM>errno</EM> on failure and 0 on success.


       The <EM>DbLog::archive</EM> method is based on  the  C  <EM>log</EM><STRONG>_</STRONG><EM>archive</EM>
       function,  which  is  the  underlying function used by the
       <STRONG><A HREF="db_archive.html">db_archive(1)</A></STRONG>  utility.   See  the  source  code  for  the
       <EM>db</EM><STRONG>_</STRONG><EM>archive</EM>  utility for an example of using <EM>log</EM><STRONG>_</STRONG><EM>archive</EM> in
       a UNIX environment.  See the <STRONG><A HREF="db_archive.html">db_archive(1)</A></STRONG> manual page for
       more information on database archival procedures.

  <EM>DbLog::db</EM><STRONG>_</STRONG><EM>register</EM>
       The  <EM>DbLog::db</EM><STRONG>_</STRONG><EM>register</EM>  method registers a file name with
       the log manager and copies a  file  identification  number
       into  the  memory  location referenced by <EM>fidp</EM>.  This file
       identification number should be used in all subsequent log
       messages  that  refer to operations on this file.  The log
       manager records all file name to file identification  num-
       ber mappings at each checkpoint so that a recovery process

  <EM>DbLog::db</EM><STRONG>_</STRONG><EM>unregister</EM>
       The <EM>DbLog::db</EM><STRONG>_</STRONG><EM>unregister</EM>  method  disassociates  the  file
       name  to  file  identification number mapping for the file
       identification number specified by the <EM>fid</EM> parameter.  The
       file identification number may then be reused.

       The <EM>DbLog::db</EM><STRONG>_</STRONG><EM>unregister</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or
       returns the value of <EM>errno</EM> on failure and 0 on success.

  <EM>DbLog::stat</EM>
       The <EM>DbLog::stat</EM> function creates a  statistical  structure
       and  copies a pointer to it into the user-specified memory
       location.

       Statistical structures are created  in  allocated  memory.
       If  <EM>db</EM><STRONG>_</STRONG><EM>malloc</EM>  is  non-NULL,  it is called to allocate the
       memory, otherwise, the library function <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG> is used.
       The  function <EM>db</EM><STRONG>_</STRONG><EM>malloc</EM> must match the calling conventions
       of the <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG> library routine.  Regardless, the  caller
       is  responsible  for deallocating the returned memory.  To
       deallocate the returned memory, free each returned  memory
       pointer;  pointers  inside  the  memory  do not need to be
       individually freed.  The log statistics are  stored  in  a
       structure  of type DB_LOG_STAT (typedef'd in &lt;db.h&gt;).  The
       following DB_LOG_STAT fields will be filled in:

       u_long st_magic;
            The magic number that identifies  a  file  as  a  log
            file.
       u_long st_version;
            The version of the log file type.
       u_long st_mode;
            The mode of any created log files.
       u_long st_lg_max;
            The  maximum  size  of any individual file comprising
            the log.
       u_long st_written;
            The total number of bytes written to this log.
       u_long st_written_chkpt;
            The number of bytes written  since  the  last  check-
            point.
       u_long st_region_wait;
            The number of times that a process was able to obtain
            the region lock without waiting.
       u_long st_region_nowait;
            The number of times that a process was forced to wait
            before obtaining the region lock.


</PRE>
<H2>ENVIRONMENT VARIABLES</H2><PRE>
       The  following  environment variables affect the execution
       of <EM>db</EM><STRONG>_</STRONG><EM>log</EM>:

       DB_HOME
            create  the log, as described in the <EM>DbLog::open</EM> sec-
            tion above.


</PRE>
<H2>ERRORS</H2><PRE>
       Methods marked as returning <EM>errno</EM> will, by default,  throw
       an exception that encapsulates the error information.  The
       default error behavior can be changed, see <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>.

       The <EM>DbLog::open</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>
       or return <EM>errno</EM> for any of the errors  specified  for  the
       following DB and library functions: DbLog::<STRONG><A HREF="close.html">close(3)</A></STRONG>,
       DbLog::<STRONG><A HREF="unlink.html">unlink(3)</A></STRONG>, <STRONG><A HREF="atoi.html">atoi(3)</A></STRONG>, <STRONG><A HREF="close.html">close(2)</A></STRONG>, <STRONG><A HREF="db_version.html">db_version(3)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="lseek.html">lseek(2)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>,
       <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="mmap.html">mmap(2)</A></STRONG>, <STRONG><A HREF="munmap.html">munmap(2)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="opendir.html">opendir(3)</A></STRONG>,
       <STRONG><A HREF="read.html">read(2)</A></STRONG>, <STRONG><A HREF="readdir.html">readdir(3)</A></STRONG>, <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>, <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>,
       <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strchr.html">strchr(3)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>, <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>,
       <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, <STRONG><A HREF="strncmp.html">strncmp(3)</A></STRONG>, <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>, and
       <STRONG><A HREF="write.html">write(2)</A></STRONG>.

       In addition, the <EM>DbLog::open</EM> method may fail and  throw  a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or  return  <EM>errno</EM> for the following condi-
       tions:

       [EAGAIN]
            The shared memory region was locked and  (repeatedly)
            unavailable.

       [EINVAL]
            An invalid flag value or parameter was specified.

            The  DB_THREAD  flag  was specified and spinlocks are
            not implemented for this architecture.

            The specified file size was too large.

       The <EM>DbLog::close</EM> method may  fail  and  throw  a  <EM>DbExcep-</EM>
       <STRONG><A HREF="tion.html">tion(3)</A></STRONG>  or  return  <EM>errno</EM> for any of the errors specified
       for the following DB and library functions: <STRONG><A HREF="close.html">close(2)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="munmap.html">munmap(2)</A></STRONG>, and <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>.

       The  <EM>DbLog::flush</EM>  method  may  fail  and throw a <EM>DbExcep-</EM>
       <STRONG><A HREF="tion.html">tion(3)</A></STRONG> or return <EM>errno</EM> for any of  the  errors  specified
       for the following DB and library functions: <STRONG><A HREF="close.html">close(2)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="fsync.html">fsync(2)</A></STRONG>, <STRONG><A HREF="lseek.html">lseek(2)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>,
       <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>,
       <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>, <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>,
       <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>, and <STRONG><A HREF="write.html">write(2)</A></STRONG>.

       In  addition, the <EM>DbLog::flush</EM> method may fail and throw a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for  the  following  condi-
       tions:

       [EINVAL]
            An invalid flag value or parameter was specified.

       tions:


       [EINVAL]
            An invalid flag value or parameter was specified.

            The DB_FIRST flag was specified and no log files were
            found.

       The <EM>DbLog::file</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>
       or return <EM>errno</EM> for any of the errors  specified  for  the
       following DB and library functions: <STRONG><A HREF="close.html">close(2)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>,
       <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>,
       <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>, <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>,
       <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>, <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, and <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>.

       In addition, the <EM>DbLog::file</EM> method may fail and  throw  a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or  return  <EM>errno</EM> for the following condi-
       tions:

       [ENOMEM]
            The supplied buffer was too small  to  hold  the  log
            file name.

       The  <EM>DbLog::put</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>
       or return <EM>errno</EM> for any of the errors  specified  for  the
       following DB and library functions: <STRONG><A HREF="close.html">close(2)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>,
       <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="fsync.html">fsync(2)</A></STRONG>, <STRONG><A HREF="lseek.html">lseek(2)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>,
       <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>, <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>,
       <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>, <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>, <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>,
       <STRONG><A HREF="time.html">time(3)</A></STRONG>, <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>, and <STRONG><A HREF="write.html">write(2)</A></STRONG>.

       In  addition,  the  <EM>DbLog::put</EM> method may fail and throw a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for  the  following  condi-
       tions:

       [EINVAL]
            An invalid flag value or parameter was specified.

            The  record  to  be logged is larger than the maximum
            log record.

       The <EM>DbLog::unlink</EM> method may fail  and  throw  a  <EM>DbExcep-</EM>
       <STRONG><A HREF="tion.html">tion(3)</A></STRONG>  or  return  <EM>errno</EM> for any of the errors specified
       for the following DB and library functions: <STRONG><A HREF="close.html">close(2)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>,
       <STRONG><A HREF="mmap.html">mmap(2)</A></STRONG>, <STRONG><A HREF="munmap.html">munmap(2)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>,
       <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>, <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>,
       <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, and <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>.

       In addition, the <EM>DbLog::unlink</EM> method may fail and throw a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or  return  <EM>errno</EM> for the following condi-
       tions:


       In addition, the <EM>DbLog::archive</EM> method may fail and  throw
       a  <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for the following condi-
       tions:

       [EINVAL]
            An invalid flag value or parameter was specified.

            The log was corrupted.

       The <EM>DbLog::db</EM><STRONG>_</STRONG><EM>register</EM> method may fail and throw  a  <EM>DbEx-</EM>
       <STRONG><A HREF="ception.html">ception(3)</A></STRONG> or return <EM>errno</EM> for any of the errors specified
       for the following DB and library functions: <STRONG><A HREF="close.html">close(2)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="fsync.html">fsync(2)</A></STRONG>, <STRONG><A HREF="lseek.html">lseek(2)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>,
       <STRONG><A HREF="memcmp.html">memcmp(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>,
       <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>, <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>,
       <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>, <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, <STRONG><A HREF="time.html">time(3)</A></STRONG>, <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>, and
       <STRONG><A HREF="write.html">write(2)</A></STRONG>.

       In  addition,  the  <EM>DbLog::db</EM><STRONG>_</STRONG><EM>register</EM> method may fail and
       throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for  the  following
       conditions:

       [EINVAL]
            An invalid flag value or parameter was specified.

       The <EM>DbLog::db</EM><STRONG>_</STRONG><EM>unregister</EM> method may fail and throw a <EM>DbEx-</EM>
       <STRONG><A HREF="ception.html">ception(3)</A></STRONG> or return <EM>errno</EM> for any of the errors specified
       for the following DB and library functions: <STRONG><A HREF="close.html">close(2)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="fsync.html">fsync(2)</A></STRONG>, <STRONG><A HREF="lseek.html">lseek(2)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>,
       <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>,
       <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>, <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>,
       <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>,  <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, <STRONG><A HREF="time.html">time(3)</A></STRONG>, <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>, and <STRONG><A HREF="write.html">write(2)</A></STRONG>.

       In addition, the <EM>DbLog::db</EM><STRONG>_</STRONG><EM>unregister</EM> method may fail  and
       throw  a  <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for the following
       conditions:

       [EINVAL]
            An invalid flag value or parameter was specified.


</PRE>
<H2>BUGS</H2><PRE>
       The log files are not  machine  architecture  independent.
       Specifically,  their  metadata  are  not stored in a fixed
       byte order.


</PRE>
<H2>SEE ALSO</H2><PRE>
       <STRONG><A HREF="db_archive.html">db_archive(1)</A></STRONG>, <STRONG><A HREF="db_checkpoint.html">db_checkpoint(1)</A></STRONG>, <STRONG><A HREF="db_deadlock.html">db_deadlock(1)</A></STRONG>, <STRONG><A HREF="db_dump.html">db_dump(1)</A></STRONG>,
       <STRONG><A HREF="db_load.html">db_load(1)</A></STRONG>, <STRONG><A HREF="db_recover.html">db_recover(1)</A></STRONG>, <STRONG><A HREF="db_stat.html">db_stat(1)</A></STRONG>, <STRONG><A HREF="db_intro.html">db_intro(3)</A></STRONG>, <STRONG><A HREF="db_jump.html">db_jump(3)</A></STRONG>,
       <STRONG><A HREF="db_thread.html">db_thread(3)</A></STRONG>, <STRONG><A HREF="Db.html">Db(3)</A></STRONG>, <STRONG><A HREF="Dbc.html">Dbc(3)</A></STRONG>, <STRONG><A HREF="DbEnv.html">DbEnv(3)</A></STRONG>, <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>, <STRONG><A HREF="DbInfo.html">DbInfo(3)</A></STRONG>,
       <STRONG><A HREF="DbLock.html">DbLock(3)</A></STRONG>, <STRONG><A HREF="DbLocktab.html">DbLocktab(3)</A></STRONG>, <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>, <STRONG><A HREF="DbLsn.html">DbLsn(3)</A></STRONG>, <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG>,
       <STRONG><A HREF="DbMpoolFile.html">DbMpoolFile(3)</A></STRONG>, <STRONG><A HREF="Dbt.html">Dbt(3)</A></STRONG>, <STRONG><A HREF="DbTxn.html">DbTxn(3)</A></STRONG>, <STRONG><A HREF="DbTxnMgr.html">DbTxnMgr(3)</A></STRONG>
</PRE>
</BODY>
</HTML>
