<HTML>
<HEAD>
<TITLE>DbLock</TITLE>
</HEAD>
<BODY>
<H1>DbLock</H1>
<HR>
<PRE>

</PRE>
<H2>NAME</H2><PRE>
       DbLock - lock class


</PRE>
<H2>SYNOPSIS</H2><PRE>
       <STRONG>#include</STRONG> <STRONG>&lt;db_cxx.h&gt;</STRONG>

       <STRONG>int</STRONG>
       <STRONG>DbLock::put(DbLockTab</STRONG> <STRONG>*lt);</STRONG>

       <STRONG>unsigned</STRONG> <STRONG>int</STRONG>
       <STRONG>DbLock::get_lock_id();</STRONG>

       <STRONG>void</STRONG>
       <STRONG>DbLock::set_lock_id(unsigned</STRONG> <STRONG>int);</STRONG>

       <STRONG>DBLock::DbLock(unsigned</STRONG> <STRONG>int);</STRONG>
       <STRONG>DBLock::DbLock();</STRONG>
       <STRONG>DBLock::DbLock(const</STRONG> <STRONG>DbLock</STRONG> <STRONG>&amp;);</STRONG>
       <STRONG>DbLock</STRONG> <STRONG>&amp;DBLock::operator</STRONG> <STRONG>=</STRONG> <STRONG>(const</STRONG> <STRONG>DbLock</STRONG> <STRONG>&amp;);</STRONG>



</PRE>
<H2>DESCRIPTION</H2><PRE>
       The DB library is a family of classes that provides a mod-
       ular programming interface to transactions and record-ori-
       ented  file  access.   The  library  includes  support for
       transactions, locking, logging and file page  caching,  as
       well  as  various  indexed  access  methods.   Many of the
       classes (e.g., the file page  caching  class)  are  useful
       independent of the other DB classes, although some classes
       are explicitly based on other classes (e.g.,  transactions
       and  logging).   For a general description of the DB pack-
       age, see <STRONG><A HREF="db_intro.html">db_intro(3)</A></STRONG>.

       This manual page describes the  specific  details  of  the
       locking  interface.   The DbLock class is used in conjunc-
       tion with <STRONG><A HREF="DbLockTab.html">DbLockTab(3)</A></STRONG> to provide general-purpose locking.
       While  designed  to  work with the other Db classes, these
       classes are also useful for more general locking purposes.
       Locks  can  be  shared  between processes.  In most cases,
       when multiple threads or processes are using locking,  the
       deadlock detector, <STRONG><A HREF="db_deadlock.html">db_deadlock(1)</A></STRONG>, should be run.

  <EM>DbLock::put</EM>
       The  <EM>DbLock::put</EM>  method  is  a  simple  interface  to the
       <EM>DbLockTab::vec</EM> functionality, and is equivalent to calling
       the  <EM>DbLockTab::vec</EM>  method  with  a  single  element <EM>list</EM>
       array, for which the <EM>op</EM> field is DB_LOCK_PUT and the  <EM>lock</EM>
       field   is   represented   by   the  DbLock  object.   The
       <EM>DbLock::put</EM>  method  returns  success   and   failure   as
       described for the <EM>DbLockTab::vec</EM> method.

  <EM>DbLock::get</EM><STRONG>_</STRONG><EM>lock</EM><STRONG>_</STRONG><EM>id</EM>
       The  <EM>DbLock::get</EM><STRONG>_</STRONG><EM>lock</EM><STRONG>_</STRONG><EM>id</EM> method gets the underlying repre-
       sentation of the lock  id.   Direct  manipulation  of  the
       an exception that encapsulates the error information.  The
       default error behavior can be changed, see <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>.

       The <EM>DbLock::put</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>
       or return <EM>errno</EM> for any of the errors  specified  for  the
       following DB and library functions: DbLock::<STRONG><A HREF="detect.html">detect(3)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="lseek.html">lseek(2)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>,
       <STRONG><A HREF="mmap.html">mmap(2)</A></STRONG>, <STRONG><A HREF="munmap.html">munmap(2)</A></STRONG>, <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, and <STRONG><A HREF="write.html">write(2)</A></STRONG>.

       In  addition,  the <EM>DbLock::put</EM> method may fail and throw a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for  the  following  condi-
       tions:

       [EACCES]
            An  attempt  was made to release lock held by another
            locker.

       [EINVAL]
            An invalid flag value or parameter was specified.


</PRE>
<H2>BUGS</H2><PRE>
       If a process dies while holding locks, those locks  remain
       held  and are <STRONG>never</STRONG> released.  In this case, all processes
       should exit as quickly as possible, so that <EM>db</EM><STRONG>_</STRONG><EM>recover</EM> can
       be run.


</PRE>
<H2>SEE ALSO</H2><PRE>
       <STRONG><A HREF="db_archive.html">db_archive(1)</A></STRONG>, <STRONG><A HREF="db_checkpoint.html">db_checkpoint(1)</A></STRONG>, <STRONG><A HREF="db_deadlock.html">db_deadlock(1)</A></STRONG>, <STRONG><A HREF="db_dump.html">db_dump(1)</A></STRONG>,
       <STRONG><A HREF="db_load.html">db_load(1)</A></STRONG>, <STRONG><A HREF="db_recover.html">db_recover(1)</A></STRONG>, <STRONG><A HREF="db_stat.html">db_stat(1)</A></STRONG>, <STRONG><A HREF="db_intro.html">db_intro(3)</A></STRONG>, <STRONG><A HREF="db_jump.html">db_jump(3)</A></STRONG>,
       <STRONG><A HREF="db_thread.html">db_thread(3)</A></STRONG>, <STRONG><A HREF="Db.html">Db(3)</A></STRONG>, <STRONG><A HREF="Dbc.html">Dbc(3)</A></STRONG>, <STRONG><A HREF="DbEnv.html">DbEnv(3)</A></STRONG>, <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>, <STRONG><A HREF="DbInfo.html">DbInfo(3)</A></STRONG>,
       <STRONG><A HREF="DbLock.html">DbLock(3)</A></STRONG>, <STRONG><A HREF="DbLocktab.html">DbLocktab(3)</A></STRONG>, <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>, <STRONG><A HREF="DbLsn.html">DbLsn(3)</A></STRONG>, <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG>,
       <STRONG><A HREF="DbMpoolFile.html">DbMpoolFile(3)</A></STRONG>, <STRONG><A HREF="Dbt.html">Dbt(3)</A></STRONG>, <STRONG><A HREF="DbTxn.html">DbTxn(3)</A></STRONG>, <STRONG><A HREF="DbTxnMgr.html">DbTxnMgr(3)</A></STRONG>
</PRE>
</BODY>
</HTML>
