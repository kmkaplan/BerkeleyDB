<HTML>
<HEAD>
<TITLE>DbEnv</TITLE>
</HEAD>
<BODY>
<H1>DbEnv</H1>
<HR>
<PRE>

</PRE>
<H2>NAME</H2><PRE>
       DbEnv - Db initialization and environment options


</PRE>
<H2>SYNOPSIS</H2><PRE>
       <STRONG>#include</STRONG> <STRONG>&lt;db_cxx.h&gt;</STRONG>

       <STRONG>DbEnv::DbEnv(const</STRONG> <STRONG>char</STRONG> <STRONG>*db_home,</STRONG> <STRONG>char</STRONG> <STRONG>*const</STRONG> <STRONG>*db_config,</STRONG> <STRONG>int</STRONG> <STRONG>flags);</STRONG>
       <STRONG>DbEnv::DbEnv();</STRONG>
       <STRONG>DbEnv::~DbEnv();</STRONG>

       <STRONG>int</STRONG> <STRONG>DbEnv::appinit(const</STRONG> <STRONG>char</STRONG> <STRONG>*db_home,</STRONG>
            <STRONG>char</STRONG> <STRONG>*const</STRONG> <STRONG>*db_config,</STRONG> <STRONG>int</STRONG> <STRONG>flags);</STRONG>

       <STRONG>int</STRONG> <STRONG>DbEnv::get_lorder()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_lorder(int);</STRONG>

       <STRONG>typedef</STRONG> <STRONG>void</STRONG> <STRONG>(*db_errcall_fcn)(const</STRONG> <STRONG>char</STRONG> <STRONG>*,</STRONG> <STRONG>char</STRONG> <STRONG>*);</STRONG>
       <STRONG>db_errcall_fcn</STRONG> <STRONG>DbEnv::get_errcall()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_errcall(db_errcall_fcn);</STRONG>

       <STRONG>FILE</STRONG> <STRONG>DbEnv::*get_errfile()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_errfile(FILE</STRONG> <STRONG>*);</STRONG>

       <STRONG>const</STRONG> <STRONG>char</STRONG> <STRONG>DbEnv::*get_errpfx()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_errpfx(const</STRONG> <STRONG>char</STRONG> <STRONG>*);</STRONG>

       <STRONG>int</STRONG> <STRONG>DbEnv::get_verbose()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_verbose(int);</STRONG>

       <STRONG>char</STRONG> <STRONG>DbEnv::*get_home()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_home(char</STRONG> <STRONG>*);</STRONG>

       <STRONG>char</STRONG> <STRONG>DbEnv::*get_log_dir()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_log_dir(char</STRONG> <STRONG>*);</STRONG>

       <STRONG>char</STRONG> <STRONG>DbEnv::*get_tmp_dir()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_tmp_dir(char</STRONG> <STRONG>*);</STRONG>

       <STRONG>char</STRONG> <STRONG>DbEnv::**get_data_dir()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_data_dir(char</STRONG> <STRONG>**);</STRONG>

       <STRONG>int</STRONG> <STRONG>DbEnv::get_data_cnt()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_data_cnt(int);</STRONG>

       <STRONG>int</STRONG> <STRONG>DbEnv::get_data_next()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_data_next(int);</STRONG>

       <STRONG>DbLockTab</STRONG> <STRONG>DbEnv::*get_lk_info()</STRONG> <STRONG>const;</STRONG>

       <STRONG>u_int8_t</STRONG> <STRONG>DbEnv::*get_lk_conflicts()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_lk_conflicts(u_int8_t</STRONG> <STRONG>*);</STRONG>

       <STRONG>int</STRONG> <STRONG>DbEnv::get_lk_modes()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_lk_modes(int);</STRONG>
       <STRONG>u_int32_t</STRONG> <STRONG>DbEnv::get_lg_max()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_lg_max(u_int32_t);</STRONG>

       <STRONG>DbMpool</STRONG> <STRONG>DbEnv::*get_mp_info()</STRONG> <STRONG>const;</STRONG>

       <STRONG>size_t</STRONG> <STRONG>DbEnv::get_mp_mmapsize()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_mp_mmapsize(size_t);</STRONG>

       <STRONG>size_t</STRONG> <STRONG>DbEnv::get_mp_size()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_mp_size(size_t);</STRONG>

       <STRONG>DbTxnMgr</STRONG> <STRONG>DbEnv::*get_tx_info()</STRONG> <STRONG>const;</STRONG>

       <STRONG>unsigned</STRONG> <STRONG>int</STRONG> <STRONG>DbEnv::get_tx_max()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_tx_max(unsigned</STRONG> <STRONG>int);</STRONG>

       <STRONG>typedef</STRONG> <STRONG>int</STRONG> <STRONG>(*tx_recover_fcn)(DB_LOG</STRONG> <STRONG>*,</STRONG> <STRONG>DBT</STRONG> <STRONG>*,</STRONG> <STRONG>DB_LSN</STRONG> <STRONG>*,</STRONG> <STRONG>int,</STRONG> <STRONG>void</STRONG> <STRONG>*);</STRONG>
       <STRONG>tx_recover_fcn</STRONG> <STRONG>DbEnv::get_tx_recover()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_tx_recover(tx_recover_fcn);</STRONG>

       <STRONG>u_int32_t</STRONG> <STRONG>DbEnv::get_flags()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_flags(u_int32_t);</STRONG>

       <STRONG>enum</STRONG> <STRONG>ErrorModel</STRONG> <STRONG>{</STRONG> <STRONG>Exception,</STRONG> <STRONG>ErrorReturn</STRONG> <STRONG>};</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_error_model(ErrorModel);</STRONG>
       <STRONG>ErrorModel</STRONG> <STRONG>DbEnv::get_error_model()</STRONG> <STRONG>const;</STRONG>

       <STRONG>class</STRONG> <STRONG>ostream*</STRONG> <STRONG>DbEnv::get_error_stream()</STRONG> <STRONG>const;</STRONG>
       <STRONG>void</STRONG> <STRONG>DbEnv::set_error_stream(class</STRONG> <STRONG>ostream*);</STRONG>


</PRE>
<H2>DESCRIPTION</H2><PRE>
       The DB library is a family of classes that provides a mod-
       ular programming interface to transactions and record-ori-
       ented  file  access.   The  library  includes  support for
       transactions, locking, logging and file page  caching,  as
       well  as  various  indexed  access  methods.   Many of the
       classes (e.g., the file page  caching  class)  are  useful
       independent of the other DB classes, although some classes
       are explicitly based on other classes (e.g.,  transactions
       and  logging).   For a general description of the DB pack-
       age, see <STRONG><A HREF="db_intro.html">db_intro(3)</A></STRONG>.


       The DbEnv class provides simple access  to  an  underlying
       data  structure, whose elements can be examined or changed
       using the <EM>set</EM><STRONG>_</STRONG> or <EM>get</EM><STRONG>_</STRONG> methods.  The remainder of the man-
       ual  page  sometimes  refers  to  these accesses using the
       underlying name, e.g., simply <EM>lorder</EM> instead of <EM>get</EM><STRONG>_</STRONG><EM>lorder</EM>
       and  <EM>set</EM><STRONG>_</STRONG><EM>lorder</EM>.  The constructors set all elements of the
       underlying structure to zero.  The constructor with  three
       arguments has the effect of calling <EM>DbEnv::appinit</EM> immedi-
       ately to initialize the application with  default  parame-
       ters.   To  delay the initialization, use the default con-
       structor.  The various set_ methods can then  be  used  to
       features of Db.

       The  <EM>db</EM><STRONG>_</STRONG><EM>home</EM>  and  <EM>db</EM><STRONG>_</STRONG><EM>config</EM>  arguments  to  <EM>appinit</EM>   are
       described in the section below entitled ``FILE NAMING''.

       The  <EM>flags</EM> argument specifies the subsystems that are ini-
       tialized and how the environment affects Db  file  naming,
       among  other  things.   The  flags  value  is specified by
       <STRONG>or</STRONG>'ing together one or more of the following values:

       DB_CREATE
            Cause subsystems to create any underlying  files,  as
            necessary.   (See <STRONG><A HREF="Db.html">Db(3)</A></STRONG>, <STRONG><A HREF="DbLockTab.html">DbLockTab(3)</A></STRONG>, <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>, <EM>DbM-</EM>
            <STRONG><A HREF="pool.html">pool(3)</A></STRONG> and <STRONG><A HREF="DbTxnMgr.html">DbTxnMgr(3)</A></STRONG> for more information.)

       DB_INIT_LOCK
            Initialize  the  lock  subsystem;  see  <STRONG><A HREF="DbLockTab.html">DbLockTab(3)</A></STRONG>.
            This subsystem should be used when multiple processes
            or threads are going to be reading or  writing  a  Db
            database,  so  that  they  do not interfere with each
            other.  When the DB_INIT_LOCK flag is  specified,  it
            is  usually  necessary  to run the deadlock detector,
            <STRONG><A HREF="db_deadlock.html">db_deadlock(1)</A></STRONG>, as well.

       DB_INIT_LOG
            Initialize the log  subsystem;  see  <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>.   This
            subsystem  is  used when recovery from application or
            system failure is important.

       DB_INIT_MPOOL
            Initialize the mpool subsystem; see <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG>.  This
            subsystem  is  used whenever the application is using
            the Db access methods for any purpose.

       DB_INIT_TXN
            Initialize the transaction subsystem;  see  <STRONG><A HREF="DbTxn.html">DbTxn(3)</A></STRONG>.
            This  subsystem  is  used  when atomicity of multiple
            operations   and   recovery   are   important.    The
            DB_INIT_TXN flag implies the DB_INIT_LOG flag.

       DB_MPOOL_PRIVATE
            Create a private memory pool (see <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG> for fur-
            ther information).  Ignored unless  DB_INIT_MPOOL  is
            also specified.

       DB_NOMMAP
            Do  not  map  any  files within this environment (see
            <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG> for further information).  Ignored  unless
            DB_INIT_MPOOL is also specified.

       DB_RECOVER
            Run  normal recovery on this environment before open-
            ing it for normal use.  If  this  flag  is  set,  the
            DB_CREATE,  DB_INIT_TXN,  and  DB_INIT_LOG flags must

       DB_THREAD
            Ensure that handles returned by the Db subsystems are
            useable by multiple threads within a single  process,
            i.e.,  that  the  system  is ``free-threaded''.  (See
            <STRONG><A HREF="DbLockTab.html">DbLockTab(3)</A></STRONG>, <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>, <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG>,  <EM>Db::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG>  and
            <STRONG><A HREF="DbTxn.html">DbTxn(3)</A></STRONG> for more information.)

       DB_TXN_NOSYNC
            On transaction commit, do not synchronously flush the
            log (see <STRONG><A HREF="DbTxn.html">DbTxn(3)</A></STRONG> for further information).   Ignored
            unless DB_INIT_TXN is also specified.

       DB_USE_ENVIRON
            The Db process' environment may be permitted to spec-
            ify information to be used when naming files (see the
            section  entitled ``FILE NAMING'' below).  As permit-
            ting users to specify which files are used can create
            security  problems,  environment  information will be
            used in  file  naming  for  all  users  only  if  the
            DB_USE_ENVIRON flag is set.

       DB_USE_ENVIRON_ROOT
            The Db process' environment may be permitted to spec-
            ify information to be used when naming files (see the
            section  entitled ``FILE NAMING'' below).  As permit-
            ting users to specify which files are used can create
            security problems, if the DB_USE_ENVIRON_ROOT flag is
            set, environment information will be  used  for  file
            naming only for users with a user-ID matching that of
            the  superuser  (specifically,  users  for  whom  the
            <EM>getuid</EM> system call returns the user-ID 0).

       The  Db environment is configured based on which set meth-
       ods have been used.  It is expected that applications will
       use  a  single  DbEnv object as the argument to all of the
       subsystems in the DB package.  The  fields  of  the  DbEnv
       object used by <EM>appinit</EM> are described below.  As references
       to the DbEnv object may be maintained by  <EM>appinit</EM>,  it  is
       necessary  that  the DbEnv object and memory it references
       be valid until the object is destroyed.  The  <EM>dbenv</EM>  argu-
       ment  may  not be NULL.  If any of the fields of the <EM>dbenv</EM>
       are set to 0, defaults appropriate for the system are used
       where possible.

       The  following  fields in the DbEnv object may be initial-
       ized, using the appropriate  set  method,  before  calling
       <EM>appinit</EM>:

       void (*db_errcall)(char *db_errpfx, char *buffer);
            When  an  error  occurs  in  the DB package, an <EM>errno</EM>
            value is returned by the method.  In some cases, how-
            ever,  the  <EM>errno</EM>  value  may be insufficient to com-
            pletely describe the cause of the error.

            <EM>db</EM><STRONG>_</STRONG><EM>errcall</EM>  field,  except  that the error message is
            written to the file stream represented by <EM>db</EM><STRONG>_</STRONG><EM>errfile</EM>.

            If  <EM>db</EM><STRONG>_</STRONG><EM>errpfx</EM>  is  non-NULL, the message will be pre-
            ceded by the string referenced by <EM>db</EM><STRONG>_</STRONG><EM>errpfx</EM>, a  colon
            (``:'') and a space.  The message will be followed by
            a newline character.
       const char *db_errpfx;
            A prefix to prepend to error  messages.   Because  Db
            does  not copy the memory referenced by the <EM>db</EM><STRONG>_</STRONG><EM>errpfx</EM>
            field, the application may modify the  error  message
            prefix at any time.

       ostream* error_stream;
            The  error  stream  functions  like  the  error file,
            allowing errors to  be  redirected  to  a  C++  error
            stream.   It  is unwise to use both error_stream with
            nonzero values of either errcall or errfile.

       int db_verbose;
            Include informational and debugging messages as  well
            as  error  messages  in the <EM>db</EM><STRONG>_</STRONG><EM>errcall</EM> and <EM>db</EM><STRONG>_</STRONG><EM>errfile</EM>
            output.

       int (*db_yield)(void);
            The Db library makes a system call to pause for  some
            number  of  microseconds  whenever it is necessary to
            wait on a lock.  This may not be optimal,  especially
            in  a  thread-only  environment where it will be more
            efficient  to  explicitly  yield  the  processor   to
            another  thread.   If  <EM>db</EM><STRONG>_</STRONG><EM>yield</EM> returns 0, indicating
            success, the lock will be  re-tried,  otherwise,  the
            default  descheduling  method will be called and then
            the lock will be  re-tried.   Note,  it  is  probably
            incorrect  to supply a thread <EM>db</EM><STRONG>_</STRONG><EM>yield</EM> method if more
            than a single process is operating in the Db environ-
            ment.   This  is  because most thread-yield functions
            will not allow other processes to run, and  the  lock
            may  be  held  by  another  process,  not  by another
            thread.

            <STRONG>Solaris</STRONG> <STRONG>architecture</STRONG> <STRONG>note:</STRONG> Because of  bugs  in  ver-
            sions  of  Solaris  before  version  5.6, Db uses the
            <STRONG><A HREF="sema_wait.html">sema_wait(3T)</A></STRONG> call instead  of  the  <STRONG><A HREF="sema_trywait.html">sema_trywait(3T)</A></STRONG>
            call.  For this reason, setting the <EM>db</EM><STRONG>_</STRONG><EM>yield</EM> field of
            the DbEnv object will have no effect on Solaris.

       Each of the open functions that <EM>appinit</EM> may call  (<EM>DbLock-</EM>
       <EM>Tab::open</EM>,  <EM>DbLog::open</EM>, <EM>DbMpool::open</EM> and <EM>DbTxnMgr::open</EM>)
       is  called  as  follows,  where  the  DB_CREATE  flag   is
       optional:

            XXX::open(NULL, DB_CREATE,
               S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP, dbenv)

       this reason the fields of the DbEnv object relevant to the
       subsystems  being  initialized must themselves be initial-
       ized before <EM>appinit</EM> is called.  See the  manual  page  for
       each  subsystem for a list of these fields and their uses.

       The return value from each of these calls is placed in the
       appropriate field of the DbEnv object:

       DbLockTab *lk_info;
            The return value of the <EM>DbLockTab::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG> call.

       DbLog *lg_info;
            The return value of the <EM>DbLog::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG> call.

       DbMpool *mp_info;
            The return value of the <EM>DbMpool::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG> call.

       DbTxnMgr *tx_info;
            The return value of the <EM>DbTxnMgr::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG> call.

       In general, these fields are not directly used by applica-
       tions; subsystems of Db that use these fields will  simply
       reference them using the DbEnv argument passed to the sub-
       system.

       For example, an  application  using  the  Db  hash  access
       method  functions  to  access  a  database will first call
       <EM>Db::open</EM> passing it the DbEnv argument filled  in  by  the
       initial  call  to  <EM>appinit</EM>.  Then, all future calls to the
       hash access method functions for that database will  auto-
       matically  use  the  underlying  shared memory buffer pool
       that was specified by the  <EM>mp</EM><STRONG>_</STRONG><EM>info</EM>  field  of  that  DbEnv
       argument.

       The  single  exception  to this rule is the <EM>tx</EM><STRONG>_</STRONG><EM>info</EM> field,
       which applications must explicitly specify to  the  <EM>DbTxn-</EM>
       <EM>Mgr::begin</EM>, <EM>DbTxnMgr::checkpoint</EM> and <EM>DbTxnMgr::close</EM> func-
       tions.

       The <EM>error</EM><STRONG>_</STRONG><EM>model</EM> field of DbEnv allows the user to  config-
       ure  the  way errors are treated in DB.  It can be changed
       at any time (e.g., after the call to <EM>DbEnv::appinit</EM>).  The
       error model is described in <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>.


</PRE>
<H2>FILE NAMING</H2><PRE>
       The  most  important  task of <EM>appinit</EM> is to structure file
       naming within Db.

       Each of the locking, logging, memory pool and  transaction
       subsystems  of Db require shared memory regions, backed by
       the filesystem.   Further,  cooperating  applications  (or
       multiple  invocations  of the same application) must agree
       on the location of the shared  memory  regions  and  other
       files used by the Db subsystems, the log files used by the
       <EM>db</EM><STRONG>_</STRONG><EM>home</EM> argument.  There are more  complex  configurations
       where  it  may be desirable to override <EM>db</EM><STRONG>_</STRONG><EM>home</EM> or provide
       supplementary path information.

       The following describes the possible ways  in  which  file
       naming  information  may  be  specified to the Db library.
       The specific circumstances and order in which  these  ways
       are applied are described in a subsequent paragraph.

       <EM>db</EM><STRONG>_</STRONG><EM>home</EM>
            If  the  <EM>db</EM><STRONG>_</STRONG><EM>home</EM> argument to <EM>appinit</EM> is non-NULL, its
            value may be used as the  database  home,  and  files
            named relative to its path.

       DB_HOME
            If  the  DB_HOME  environment  variable  is  set when
            <EM>appinit</EM> is called, its  value  may  be  used  as  the
            database  home, and files named relative to its path.

       <EM>db</EM><STRONG>_</STRONG><EM>config</EM>
            The <EM>db</EM><STRONG>_</STRONG><EM>config</EM> argument to  <EM>appinit</EM>  may  be  used  to
            specify  an  array of character strings of the format
            ``NAME VALUE'', that specify  file  name  information
            for  the  process'  Db  environment.   The whitespace
            delimiting the two parts of the entry may be  one  or
            more &lt;space&gt; or &lt;tab&gt; characters.  (Leading or trail-
            ing &lt;space&gt;  and  &lt;tab&gt;  characters  are  discarded.)
            Each  entry  must specify both the NAME and the VALUE
            of the pair.  All entries with unrecognized NAME val-
            ues  will  be  ignored.   The <EM>db</EM><STRONG>_</STRONG><EM>config</EM> array must be
            NULL terminated.

       DB_CONFIG
            The same information specified to the <EM>db</EM><STRONG>_</STRONG><EM>config</EM> argu-
            ment  to  <EM>appinit</EM> may be specified using a configura-
            tion file.  If a database  home  directory  has  been
            specified  (either  by  the  application specifying a
            non-NULL <EM>db</EM><STRONG>_</STRONG><EM>home</EM>  argument  to  <EM>appinit</EM>,  or  by  the
            application setting the DB_USE_ENVIRON or DB_USE_ENV-
            IRON_ROOT flags and the DB_HOME environment  variable
            being  set),  any  file  named  ``DB_CONFIG''  in the
            database home directory will be read for lines of the
            format ``NAME VALUE''.  The whitespace delimiting the
            two parts of the line may be one or more  &lt;space&gt;  or
            &lt;tab&gt;  characters.   (Leading or trailing &lt;space&gt; and
            &lt;tab&gt; characters are discarded.)  All empty lines  or
            lines  whose first non-whitespace character is a hash
            character (``#'') will be ignored.   Each  line  must
            specify both the NAME and the VALUE of the pair.  All
            lines with unrecognized NAME values will be  ignored.

       The  following ``NAME VALUE'' pairs in the <EM>db</EM><STRONG>_</STRONG><EM>config</EM> argu-
       ment and the DB_CONFIG file are currently supported by Db.

       DB_LOG_DIR
            The path of a directory to be used as the location of
            logging  files,  e.g.,  files created by the <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>
            subsystem will be relative  to  this  directory.   If
            specified,  this  is  the directory name that will be
            passed to <EM>DbLog::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG>.

       DB_TMP_DIR
            The path of a directory to be used as the location of
            temporary  files, e.g., files created to back in-mem-
            ory access method databases will be created  relative
            to this path.  Note, these temporary files can poten-
            tially be quite large, depending on the size  of  the
            database.

            If  DB_TMP_DIR  is not specified, the following envi-
            ronment variables are checked in  order:  ``TMPDIR'',
            ``TEMP'', ``TMP'' and ``TempFolder''.  If one of them
            is set, temporary files are created relative  to  the
            directory it specifies.

            If  DB_TMP_DIR is not specified and none of the above
            environment variables are set, the first possible one
            of  the  following  directories  is  used:  <EM>/var/tmp</EM>,
            <EM>/usr/tmp</EM>, <EM>/temp</EM>, <EM>/tmp</EM>, <EM>C:/temp</EM> and <EM>C:/tmp</EM>.

       The following describes  the  specific  circumstances  and
       order  in which the different ways of specifying file nam-
       ing information are applied.  Specifically, Db  file  name
       processing  proceeds  sequentially  through  the following
       steps:

       ``/''
            If any file name specified to any  Db  method  begins
            with  a leading slash, that file name is used without
            modification by Db.

       DB_CONFIG
            If   a   relevant   configuration    string    (e.g.,
            DB_DATA_DIR),  is specified in the DB_CONFIG configu-
            ration file, the VALUE from the ``NAME  VALUE''  pair
            is  prepended  to  the  current  file  name.   If the
            resulting file name begins with a leading slash,  the
            file name is used without further modification by Db.

            The DB_CONFIG configuration file is intended to  per-
            mit systems to customize file location for a database
            independent of applications using that database.  For
            example,   a  database  administrator  can  move  the
            database log and data files to a  different  location
            without application recompilation.

       <EM>db</EM><STRONG>_</STRONG><EM>config</EM>
            If    a    relevant   configuration   string   (e.g.,
            runs.

       DB_HOME
            If the DB_HOME environment variable was set, (and the
            application has set the appropriate DB_USE_ENVIRON or
            DB_USE_ENVIRON_ROOT environment variable), its  value
            is  prepended  to  the  current  file  name.   If the
            resulting file name begins with a leading slash,  the
            file name is used without further modification by Db.

            The DB_HOME environment variable is intended to  per-
            mit  users  and  system  administrators  to  override
            application and installation defaults, e.g.,

                 env DB_HOME=/database/my_home application

            Alternatively, application writers are encouraged  to
            support  the  <STRONG>-h</STRONG>  option  found  in the supporting Db
            utilities to let users specify a database home.

       <EM>db</EM><STRONG>_</STRONG><EM>home</EM>
            If the application specified a non-NULL <EM>db</EM><STRONG>_</STRONG><EM>home</EM> argu-
            ment  to  <EM>appinit</EM>  (and  the  database  home  was not
            already specified using the DB_HOME environment vari-
            able)  its  value  is  prepended  to the current file
            name.  If the resulting file name begins with a lead-
            ing slash, the file name is used without further mod-
            ification by Db.

       (nothing)
            Finally, all file names are interpreted  relative  to
            the current working directory of the process.

       The  common  model  for a Db environment is one where only
       the DB_HOME environment variable, or the <EM>db</EM><STRONG>_</STRONG><EM>home</EM> argument,
       is  specified.   In this case, all data files will be pre-
       sumed to be relative to that directory, and all files cre-
       ated  by  the Db subsystems will be created in that direc-
       tory.

       The more complex model for a transaction environment might
       be  one  where  a database home is specified, using either
       the DB_HOME environment variable or the  <EM>db</EM><STRONG>_</STRONG><EM>home</EM>  argument
       to <EM>appinit</EM>, and then DB_DATA_DIR and DB_LOG_DIR are set to
       the relative path names of directories underneath the home
       directory  using  the <EM>db</EM><STRONG>_</STRONG><EM>config</EM> argument to <EM>appinit</EM> or the
       DB_CONFIG file.


</PRE>
<H2>EXAMPLES</H2><PRE>
       Store all files in the directory <EM>/a/database</EM>:

              DbEnv::appinit("/a/database", NULL, ...);

       Create temporary backing files in  <EM>/b/temporary</EM>,  and  all

              char *config[] = {
                  "DB_DATA datadir",
                  "DbLog logdir",
                  NULL
              };

              DbEnv::appinit("/a/database", config, ...);

       Store  data  files  in <EM>/a/database/data1</EM> and <EM>/b/data2</EM>, and
       all other files in the directory  <EM>/a/database</EM>.   Any  data
       files that are created will be created in <EM>/b/data2</EM>:

              char *config[] = {
                  "DB_DATA /b/data2",
                  "DB_DATA data1",
                  NULL
              };

              DbEnv::appinit("/a/database", config, ...);

       See  the  file  <EM>examples</EM><STRONG>_</STRONG><EM>cxx/AppinitExample.cpp</EM>  in the Db
       source distribution for a C++ language code example of how
       an application might use <EM>appinit</EM> to configure its Db envi-
       ronment.


</PRE>
<H2>ERRORS</H2><PRE>
       Methods marked as returning <EM>errno</EM> will, by default,  throw
       an exception that encapsulates the error information.  The
       default error behavior can be changed, see <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>.

       The  <EM>appinit</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or
       return <EM>errno</EM> for any of the errors specified for the  fol-
       lowing DB and library functions: Db::<STRONG><A HREF="close.html">close(3)</A></STRONG>,
       DbEnv::<STRONG><A HREF="appexit.html">appexit(3)</A></STRONG>, DbLock::<STRONG><A HREF="unlink.html">unlink(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="open.html">open(3)</A></STRONG>,
       DbLog::<STRONG><A HREF="compare.html">compare(3)</A></STRONG>, DbLog::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbLog::<STRONG><A HREF="open.html">open(3)</A></STRONG>,
       DbLog::<STRONG><A HREF="unlink.html">unlink(3)</A></STRONG>, DbMpool::<STRONG><A HREF="open.html">open(3)</A></STRONG>, DbMpool::<STRONG><A HREF="unlink.html">unlink(3)</A></STRONG>,
       DbTxnMgr::<STRONG><A HREF="checkpoint.html">checkpoint(3)</A></STRONG>, DbTxnMgr::<STRONG><A HREF="open.html">open(3)</A></STRONG>,
       DbTxnMgr::<STRONG><A HREF="unlink.html">unlink(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>, <STRONG><A HREF="fclose.html">fclose(3)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>,
       <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="fgets.html">fgets(3)</A></STRONG>, <STRONG><A HREF="fopen.html">fopen(3)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>,
       <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strchr.html">strchr(3)</A></STRONG>, <STRONG><A HREF="strcmp.html">strcmp(3)</A></STRONG>,
       <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>, <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>, <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, <STRONG><A HREF="strsep.html">strsep(3)</A></STRONG>,
       and <STRONG><A HREF="time.html">time(3)</A></STRONG>.

       In addition, the <EM>appinit</EM> method may fail and throw a <EM>DbEx-</EM>
       <STRONG><A HREF="ception.html">ception(3)</A></STRONG> or return <EM>errno</EM> for the following conditions:

       [EINVAL]
            An invalid flag value or parameter was specified.

            The  DB_THREAD  flag  was specified and spinlocks are
            not implemented for this architecture.

            The DB_HOME or TMPDIR environment variables were  set

       for the following DB and library functions:
       DbLockTab::<STRONG><A HREF="close.html">close(3)</A></STRONG>, DbLog::<STRONG><A HREF="close.html">close(3)</A></STRONG>, DbMpool::<STRONG><A HREF="close.html">close(3)</A></STRONG>,
       and DbTxnMgr::<STRONG><A HREF="close.html">close(3)</A></STRONG>.


</PRE>
<H2>BUGS</H2><PRE>
       Due to the constraints of the PA-RISC memory architecture,
       HP-UX does not allow a process to map a file into its  ad-
       dress  space multiple times.  For this reason, each DB en-
       vironment may be opened only once by a process  on  HP-UX,
       i.e., calls to <EM>appinit</EM> will fail if the specified Db envi-
       ronment has been opened and not subsequently  closed.

       Because of bugs in versions of Solaris before version 5.6,
       setting  the  <EM>db</EM><STRONG>_</STRONG><EM>yield</EM> field of the DbEnv object will have
       no effect on Solaris.


</PRE>
<H2>SEE ALSO</H2><PRE>
       <STRONG><A HREF="db_archive.html">db_archive(1)</A></STRONG>, <STRONG><A HREF="db_checkpoint.html">db_checkpoint(1)</A></STRONG>, <STRONG><A HREF="db_deadlock.html">db_deadlock(1)</A></STRONG>, <STRONG><A HREF="db_dump.html">db_dump(1)</A></STRONG>,
       <STRONG><A HREF="db_load.html">db_load(1)</A></STRONG>, <STRONG><A HREF="db_recover.html">db_recover(1)</A></STRONG>, <STRONG><A HREF="db_stat.html">db_stat(1)</A></STRONG>, <STRONG><A HREF="db_intro.html">db_intro(3)</A></STRONG>, <STRONG><A HREF="db_jump.html">db_jump(3)</A></STRONG>,
       <STRONG><A HREF="db_thread.html">db_thread(3)</A></STRONG>, <STRONG><A HREF="Db.html">Db(3)</A></STRONG>, <STRONG><A HREF="Dbc.html">Dbc(3)</A></STRONG>, <STRONG><A HREF="DbEnv.html">DbEnv(3)</A></STRONG>, <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>, <STRONG><A HREF="DbInfo.html">DbInfo(3)</A></STRONG>,
       <STRONG><A HREF="DbLock.html">DbLock(3)</A></STRONG>, <STRONG><A HREF="DbLocktab.html">DbLocktab(3)</A></STRONG>, <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>, <STRONG><A HREF="DbLsn.html">DbLsn(3)</A></STRONG>, <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG>,
       <STRONG><A HREF="DbMpoolFile.html">DbMpoolFile(3)</A></STRONG>, <STRONG><A HREF="Dbt.html">Dbt(3)</A></STRONG>, <STRONG><A HREF="DbTxn.html">DbTxn(3)</A></STRONG>, <STRONG><A HREF="DbTxnMgr.html">DbTxnMgr(3)</A></STRONG>
</PRE>
</BODY>
</HTML>
