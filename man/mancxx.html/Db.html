<HTML>
<HEAD>
<TITLE>Db</TITLE>
</HEAD>
<BODY>
<H1>Db</H1>
<HR>
<PRE>

</PRE>
<H2>NAME</H2><PRE>
       Db - database access class


</PRE>
<H2>SYNOPSIS</H2><PRE>
       <STRONG>#include</STRONG> <STRONG>&lt;db_cxx.h&gt;</STRONG>

       <STRONG>static</STRONG> <STRONG>int</STRONG>
       <STRONG>Db::open(const</STRONG> <STRONG>char</STRONG> <STRONG>*fname,</STRONG> <STRONG>DBTYPE</STRONG> <STRONG>type,</STRONG>
            <STRONG>int</STRONG> <STRONG>flags,</STRONG> <STRONG>int</STRONG> <STRONG>mode,</STRONG> <STRONG>DbEnv</STRONG> <STRONG>*dbenv,</STRONG> <STRONG>DbInfo</STRONG> <STRONG>*dbinfo,</STRONG> <STRONG>Db</STRONG> <STRONG>**dbpp);</STRONG>

       <STRONG>DBTYPE</STRONG>
       <STRONG>Db::get_type(void)</STRONG> <STRONG>const;</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::close(int</STRONG> <STRONG>flags);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::cursor(DbTxn</STRONG> <STRONG>*txnid,</STRONG> <STRONG>Dbc</STRONG> <STRONG>**cursorp);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::del(Dbt</STRONG> <STRONG>*key,</STRONG> <STRONG>DbTxn</STRONG> <STRONG>*txnid);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::fd(int</STRONG> <STRONG>*fdp);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::get(DbTxn</STRONG> <STRONG>*txnid,</STRONG> <STRONG>Dbt</STRONG> <STRONG>*key,</STRONG> <STRONG>Dbt</STRONG> <STRONG>*data,</STRONG> <STRONG>int</STRONG> <STRONG>flags);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::put(DbTxn</STRONG> <STRONG>*txnid,</STRONG> <STRONG>Dbt</STRONG> <STRONG>*key,</STRONG> <STRONG>Dbt</STRONG> <STRONG>*data,</STRONG> <STRONG>int</STRONG> <STRONG>flags);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::stat(void</STRONG> <STRONG>*sp,</STRONG> <STRONG>void</STRONG> <STRONG>*(*db_malloc)(size_t),</STRONG> <STRONG>int</STRONG> <STRONG>flags);</STRONG>

       <STRONG>int</STRONG>
       <STRONG>Db::sync(int</STRONG> <STRONG>flags);</STRONG>


</PRE>
<H2>DESCRIPTION</H2><PRE>
       The DB library is a family of classes that provides a mod-
       ular programming interface to transactions and record-ori-
       ented  file  access.   The  library  includes  support for
       transactions, locking, logging and file page  caching,  as
       well  as  various  indexed  access  methods.   Many of the
       classes (e.g., the file page  caching  class)  are  useful
       independent of the other DB classes, although some classes
       are explicitly based on other classes (e.g.,  transactions
       and  logging).   For a general description of the DB pack-
       age, see <STRONG><A HREF="db_intro.html">db_intro(3)</A></STRONG>.

       This manual page describes the Db class, which is the cen-
       ter of access activity.

       The currently supported file formats are btree, hashed and
       recno.  The btree format is a representation of a  sorted,
       shared  or preserved on disk may be created by setting the
       file parameter to NULL.

       The <EM>Db::open</EM> method copies a pointer to a  Db  object  (as
       typedef'd in the &lt;db_cxx.h&gt; include file), into the memory
       location referenced by <EM>dbpp</EM>.  The methods of  this  object
       allow   you   to  perform  various  database  actions,  as
       described below.  The <EM>Db::open</EM> method  throws  a  <EM>DbExcep-</EM>
       <STRONG><A HREF="tion.html">tion(3)</A></STRONG>  or returns the value of <EM>errno</EM> on failure and 0 on
       success.

       Note, while most of the access methods  use  <EM>file</EM>  as  the
       name  of  an  underlying file on disk, this is not guaran-
       teed.  Also, calling <EM>Db::open</EM> is  a  reasonably  expensive
       operation.  (This is based on a model where the DBMS keeps
       a set of files open for a long time  rather  than  opening
       and closing them on each query.)

       The  <EM>type</EM>  argument  is  of type DBTYPE (as defined in the
       &lt;db_cxx.h&gt; include  file)  and  must  be  set  to  one  of
       DB_BTREE,  DB_HASH,  DB_RECNO  or  DB_UNKNOWN.  If <EM>type</EM> is
       DB_UNKNOWN, the database must already exist  and  <EM>Db::open</EM>
       will  then determine if it is of type DB_BTREE, DB_HASH or
       DB_RECNO.

       The <EM>flags</EM> and <EM>mode</EM> arguments specify  how  files  will  be
       opened  and/or created when they don't already exist.  The
       flags value is specified by <STRONG>or</STRONG>'ing together one or more of
       the following values:

       DB_CREATE
            Create  any  underlying  files, as necessary.  If the
            files do not already exist and the DB_CREATE flag  is
            not specified, the call will fail.

       DB_NOMMAP
            Do  not  map  this  file  (see <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG> for further
            information).

       DB_RDONLY
            Open the database for reading only.  Any  attempt  to
            write the database using the access methods will fail
            regardless of the actual permissions of any  underly-
            ing files.

       DB_THREAD
            Cause  the  Db handle returned by the <EM>Db::open</EM> method
            to be useable by multiple  threads  within  a  single
            address space, i.e., to be ``free-threaded''.

       DB_TRUNCATE
            ``Truncate''  the database if it exists, i.e., behave
            as if the database were just created, discarding  any
            previous contents.

       The  Db  object  returned by <EM>Db::open</EM> describes a database
       type, and includes a set of functions to  perform  various
       actions,  as  described  below.  The methods for Db are as
       follows:

       DBTYPE Db::get_type(void);
            The type of the underlying access  method  (and  file
            format).    Returns   one  of  DB_BTREE,  DB_HASH  or
            DB_RECNO.  This value may be used  to  determine  the
            type  of  the  database  after a return from <EM>Db::open</EM>
            with the <EM>type</EM> argument set to DB_UNKNOWN.

       int Db::close(int flags);
            A method to flush any  cached  information  to  disk,
            close  any  open cursors (see <STRONG><A HREF="Dbc.html">Dbc(3)</A></STRONG>), free any allo-
            cated resources,  and  close  any  underlying  files.
            Since key/data pairs are cached in memory, failing to
            sync the file with  the  <EM>close</EM>  or  <EM>sync</EM>  method  may
            result in inconsistent or lost information.

            The <EM>flags</EM> parameter must be set to 0 or the following
            value:

            DB_NOSYNC
                 Do not flush cached information to disk.

            The DB_NOSYNC flag is a dangerous option.  It  should
            only be set if the application is doing logging (with
            or without transactions)  so  that  the  database  is
            recoverable  after  a system or application crash, or
            if the database  is  always  generated  from  scratch
            after any system or application crash.

            <STRONG>It</STRONG>  <STRONG>is</STRONG>  <STRONG>important</STRONG>  <STRONG>to</STRONG> <STRONG>understand</STRONG> <STRONG>that</STRONG> <STRONG>flushing</STRONG> <STRONG>cached</STRONG>
            <STRONG>information</STRONG> <STRONG>to</STRONG> <STRONG>disk</STRONG>  <STRONG>only</STRONG>  <STRONG>minimizes</STRONG>  <STRONG>the</STRONG>  <STRONG>window</STRONG>  <STRONG>of</STRONG>
            <STRONG>opportunity</STRONG>  <STRONG>for</STRONG>  <STRONG>corrupted</STRONG> <STRONG>data.</STRONG>  While unlikely, it
            is possible for database corruption to  happen  if  a
            system or application crash occurs while writing data
            to the database.  To ensure that database  corruption
            never  occurs, applications must either: use transac-
            tions and logging with automatic recovery,  use  log-
            ging  and  application-specific  recovery,  or edit a
            copy of the  database,  and,  once  all  applications
            using  the  database  have successfully called <EM>close</EM>,
            replace the original database with the updated  copy.

            When multiple threads are using the Db handle concur-
            rently, only a single thread may call the  Db  handle
            close method.

            The  <EM>close</EM>  method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns
            the value of <EM>errno</EM> on failure and 0 on success.

       int Db::cursor(DbTxn *txnid, Dbc **cursorp);
            the <EM>txnid</EM> parameter specifies the transaction context
            in which the cursor may be used.  See <STRONG><A HREF="Dbc.html">Dbc(3)</A></STRONG> for more
            information.

            The  <EM>cursor</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns
            the value of <EM>errno</EM> on failure and 0 on success.

       int Db::del(DbTxn *txnid, Dbt *key, int flags);
            A method to remove key/data pairs from the  database.
            The  key/data  pair associated with the specified <EM>key</EM>
            is discarded from the database.  In the  presence  of
            duplicate key values, all records associated with the
            designated key will be discarded.

            If the file is being accessed under transaction  pro-
            tection,  the  <EM>txnid</EM>  parameter  is  a transaction ID
            returned from <EM>txn</EM><STRONG>_</STRONG><EM>begin</EM>, otherwise, NULL.


            The <EM>flags</EM> parameter is currently unused, and must  be
            set to 0.

            The <EM>del</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns the
            value of <EM>errno</EM> on failure, 0 on success, and  DB_NOT-
            FOUND if the specified <EM>key</EM> did not exist in the file.

       int Db::fd(int *fdp);
            A method that copies a file descriptor representative
            of the underlying database into the memory referenced
            by <EM>fdp</EM>.  A file descriptor referencing the same  file
            will  be returned to all processes that call <EM>Db::open</EM>
            with the same <EM>file</EM> argument.   This  file  descriptor
            may be safely used as an argument to the <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG> and
            <STRONG><A HREF="flock.html">flock(2)</A></STRONG> locking functions.  The file  descriptor  is
            not necessarily associated with any of the underlying
            files used by the access method.

            The <EM>fd</EM> method only supports a coarse-grained form  of
            locking.   Applications  should  use the lock manager
            where possible.

            The <EM>fd</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns  the
            value of <EM>errno</EM> on failure and 0 on success.

       int Db::get(DbTxn *txnid, Dbt *key, Dbt *data, int flags);
            A method that is an  interface  for  keyed  retrieval
            from  the  database.   The  address and length of the
            data associated with the specified <EM>key</EM>  are  returned
            in the object referenced by <EM>data</EM>.

            In  the  presence  of  duplicate key values, <EM>get</EM> will
            return the first data item for  the  designated  key.
            Duplicates  are  sorted  by insert order except where
            this order has been overwritten by cursor operations.
                 database.  Upon return, both the  <EM>key</EM>  and  <EM>data</EM>
                 items  will  have  been  filled in, not just the
                 data item as is done for all other uses  of  the
                 <EM>get</EM> method.

                 For DB_GET_RECNO to be specified, the underlying
                 database must be of type btree, and it must have
                 been   created  with  the  DB_RECNUM  flag  (see
                 <EM>Db::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG>).  In this case, the <EM>data</EM>  field  of
                 the  <EM>key</EM>  must be a pointer to a memory location
                 of type <EM>db</EM><STRONG>_</STRONG><EM>recno</EM><STRONG>_</STRONG><EM>t</EM>, as described in <STRONG><A HREF="Dbt.html">Dbt(3)</A></STRONG>.

            If the database is a recno database and the requested
            key  exists,  but was never explicitly created by the
            application or was  later  deleted,  the  <EM>get</EM>  method
            returns DB_KEYEMPTY.  Otherwise, if the requested key
            isn't in the database, the <EM>get</EM> method returns DB_NOT-
            FOUND.   Otherwise,  the <EM>get</EM> method throws a <EM>DbExcep-</EM>
            <STRONG><A HREF="tion.html">tion(3)</A></STRONG> or returns the value of <EM>errno</EM> on failure  and
            0 on success.

       int Db::put(DbTxn *txnid, Dbt *key, Dbt *data, int flags);
            A method to store key/data pairs in the database.  If
            the database supports duplicates, the <EM>put</EM> method adds
            the new data value at the end of the duplicate set.

            If the file is being accessed under transaction  pro-
            tection,  the  <EM>txnid</EM>  parameter  is  a transaction ID
            returned from <EM>txn</EM><STRONG>_</STRONG><EM>begin</EM>, otherwise, NULL.

            The flags value is specified by <STRONG>or</STRONG>'ing  together  one
            or more of the following values:

            DB_APPEND
                 Append  the  key/data  pair  to  the  end of the
                 database.  For DB_APPEND to  be  specified,  the
                 underlying  database must be of type recno.  The
                 record  number  allocated  to  the   record   is
                 returned in the specified <EM>key</EM>.

            DB_NOOVERWRITE
                 Enter the new key/data pair only if the key does
                 not already appear in the database.

            The default behavior of the <EM>put</EM> method  is  to  enter
            the  new  key/data  pair,  replacing  any  previously
            existing key if duplicates are disallowed, or to  add
            a duplicate entry if duplicates are allowed.  Even if
            the designated database allows duplicates, a call  to
            <EM>put</EM> with the DB_NOOVERWRITE flag set will fail if the
            key already exists in the database.

            The <EM>put</EM> method throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns the
            value   of  <EM>errno</EM>  on  failure,  0  on  success,  and
            sion of Db and cached data.

            The  <EM>sync</EM>  method  throws a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or returns
            the value of <EM>errno</EM> on failure and 0 on success.

       int Db::stat(void *sp,
                 void *(*db_malloc)(size_t), int flags);
            A method to create a statistical structure and copy a
            pointer  to  it into user-specified memory locations.
            Specifically, if <EM>sp</EM> is non-NULL,  a  pointer  to  the
            statistics  for the database are copied into the mem-
            ory location it references.

            Statistical structures are created in allocated  mem-
            ory.  If <EM>db</EM><STRONG>_</STRONG><EM>malloc</EM> is non-NULL, it is called to allo-
            cate the memory, otherwise, the library function <EM>mal-</EM>
            <STRONG><A HREF="loc.html">loc(3)</A></STRONG>  is  used.   The function <EM>db</EM><STRONG>_</STRONG><EM>malloc</EM> must match
            the calling conventions of the <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG> library rou-
            tine.   Regardless,  the  caller  is  responsible for
            deallocating the returned memory.  To deallocate  the
            returned  memory,  free each returned memory pointer;
            pointers inside the memory do not need to be individ-
            ually freed.

            <STRONG>In</STRONG>  <STRONG>the</STRONG>  <STRONG>presence</STRONG>  <STRONG>of</STRONG>  <STRONG>multiple</STRONG>  <STRONG>threads</STRONG> <STRONG>or</STRONG> <STRONG>processes</STRONG>
            <STRONG>accessing</STRONG> <STRONG>an</STRONG> <STRONG>active</STRONG> <STRONG>database,</STRONG> <STRONG>the</STRONG>  <STRONG>returned</STRONG>  <STRONG>informa-</STRONG>
            <STRONG>tion</STRONG> <STRONG>may</STRONG> <STRONG>be</STRONG> <STRONG>out-of-date.</STRONG>

            <STRONG>This</STRONG>  <STRONG>method</STRONG>  <STRONG>may</STRONG>  <STRONG>access</STRONG>  <STRONG>all</STRONG>  <STRONG>of</STRONG>  <STRONG>the</STRONG>  <STRONG>pages</STRONG> <STRONG>in</STRONG> <STRONG>the</STRONG>
            <STRONG>database,</STRONG> <STRONG>and</STRONG> <STRONG>therefore</STRONG> <STRONG>may</STRONG> <STRONG>incur</STRONG>  <STRONG>a</STRONG>  <STRONG>severe</STRONG>  <STRONG>perfor-</STRONG>
            <STRONG>mance</STRONG>  <STRONG>penalty</STRONG>  <STRONG>and</STRONG>  <STRONG>have</STRONG> <STRONG>obvious</STRONG> <STRONG>negative</STRONG> <STRONG>effects</STRONG> <STRONG>on</STRONG>
            <STRONG>the</STRONG> <STRONG>underlying</STRONG> <STRONG>buffer</STRONG> <STRONG>pool.</STRONG>


            The <EM>flags</EM> parameter must be set to 0 or the following
            value:


            DB_RECORDCOUNT
                 In  the  case of a btree or recno database, fill
                 in the <EM>bt</EM><STRONG>_</STRONG><EM>nrecs</EM> field, but do  not  collect  any
                 other  information.   This flag makes it reason-
                 able for applications to request a record  count
                 from  a database without incurring a performance
                 penalty.

            The <EM>stat</EM> method throws a  <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or  returns
            the value of <EM>errno</EM> on failure and 0 on success.

            In  the  case  of  a  btree  or  recno  database, the
            statistics  are  stored  in  a  structure   of   type
            DB_BTREE_STAT (typedef'd in &lt;db_cxx.h&gt;).  The follow-
            ing fields will be filled in:

                 The  <EM>re</EM><STRONG>_</STRONG><EM>len</EM>  value  specified to <EM>Db::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG>, if
                 any.
            u_int32_t bt_re_pad;
                 The <EM>re</EM><STRONG>_</STRONG><EM>pad</EM> value specified  to  <EM>Db::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG>,  if
                 any.
            u_int32_t bt_pagesize;
                 Underlying tree page size.
            u_int32_t bt_levels;
                 Number of levels in the tree.
            u_int32_t bt_nrecs;
                 Number  of  data  items in the tree (since there
                 may be multiple data items per key, this  number
                 may not be the same as the number of keys).
            u_int32_t bt_int_pg;
                 Number of tree internal pages.
            u_int32_t bt_leaf_pg;
                 Number of tree leaf pages.
            u_int32_t bt_dup_pg;
                 Number of tree duplicate pages.
            u_int32_t bt_over_pg;
                 Number of tree overflow pages.
            u_int32_t bt_free;
                 Number of pages on the free list.
            u_int32_t bt_freed;
                 Number of pages made available for reuse because
                 they were emptied.
            u_int32_t bt_int_pgfree;
                 Number of bytes free in tree internal pages.
            u_int32_t bt_leaf_pgfree;
                 Number of bytes free in tree leaf pages.
            u_int32_t bt_dup_pgfree;
                 Number of bytes free in tree duplicate pages.
            u_int32_t bt_over_pgfree;
                 Number of bytes free in tree overflow pages.
            u_int32_t bt_pfxsaved;
                 Number of bytes saved by prefix compression.
            u_int32_t bt_split;
                 Total number of tree page splits (includes  fast
                 and root splits).
            u_int32_t bt_rootsplit;
                 Number of root page splits.
            u_int32_t bt_fastsplit;
                 Number  of  fast  splits.   When sorted keys are
                 added to the database, the Db btree  implementa-
                 tion  will  split  left or right to increase the
                 page-fill factor.  This number is a  measure  of
                 how  often it was possible to make such a split.
            u_int32_t bt_added;
                 Number of keys added.
            u_int32_t bt_deleted;
                 Number of keys deleted.
            u_int32_t bt_get;
                 Number of keys  retrieved.   (Note,  this  value
                 will  not  reflect  any  keys retrieved when the
                 the description of bt_cache_hit; this number  is
                 a measure of how often the lookup failed.


</PRE>
<H2>ENVIRONMENT VARIABLES</H2><PRE>
       The  following  environment variables affect the execution
       of <EM>Db::open</EM>:

       DB_HOME
            If the <EM>dbenv</EM> argument  to  <EM>Db::open</EM>  was  initialized
            using  <EM>db</EM><STRONG>_</STRONG><EM>appinit</EM>,  the  environment variable DB_HOME
            may be used as the path of the database home for  the
            interpretation  of  the  <EM>dir</EM> argument to <EM>Db::open</EM>, as
            described in <STRONG><A HREF="db_appinit.html">db_appinit(3)</A></STRONG>.   Specifically,  <EM>Db::open</EM>
            is  affected  by  the  configuration  string value of
            DB_DATA_DIR.


</PRE>
<H2>EXAMPLES</H2><PRE>
       Applications that create short-lived  databases  that  are
       discarded  or  recreated  when  the  system  fails and are
       unconcerned with concurrent access and loss of data due to
       catastrophic  failure,  may wish to use the <EM>Db::open</EM> func-
       tionality without other parts of  the  Db  library.   Such
       applications  will  only  be  concerned with the Db access
       methods.  The Db access methods will use the  memory  pool
       subsystem,  but the application is unlikely to be aware of
       this.  See the file <EM>examples</EM><STRONG>_</STRONG><EM>cxx/AccessExample.cpp</EM> in  the

       Db  source distribution for a C++ language code example of
       how such an application might use the Db library.


</PRE>
<H2>ERRORS</H2><PRE>
       Methods marked as returning <EM>errno</EM> will, by default,  throw
       an exception that encapsulates the error information.  The
       default error behavior can be changed, see <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>.

       The <EM>Db::open</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or
       return <EM>errno</EM> for any of the errors specified for the  fol-
       lowing DB and library functions: Db::<STRONG><A HREF="sync.html">sync(3)</A></STRONG>,
       DbLock::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbLock::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="id.html">id(3)</A></STRONG>,
       DbLockTab::<STRONG><A HREF="vec.html">vec(3)</A></STRONG>, DbLog::<STRONG><A HREF="db_register.html">db_register(3)</A></STRONG>, DbLog::<STRONG><A HREF="put.html">put(3)</A></STRONG>,
       DbMpool::<STRONG><A HREF="close.html">close(3)</A></STRONG>, DbMpool::<STRONG><A HREF="db_register.html">db_register(3)</A></STRONG>,
       DbMpool::<STRONG><A HREF="open.html">open(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="close.html">close(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="open.html">open(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="set.html">set(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="sync.html">sync(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>, <STRONG><A HREF="close.html">close(2)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>,
       <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memmove.html">memmove(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>,
       <STRONG><A HREF="mmap.html">mmap(2)</A></STRONG>, <STRONG><A HREF="munmap.html">munmap(2)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="read.html">read(2)</A></STRONG>, <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>,
       <STRONG><A HREF="sigfillset.html">sigfillset(3)</A></STRONG>, <STRONG><A HREF="sigprocmask.html">sigprocmask(2)</A></STRONG>, <STRONG><A HREF="stat.html">stat(2)</A></STRONG>, <STRONG><A HREF="strcpy.html">strcpy(3)</A></STRONG>,
       <STRONG><A HREF="strdup.html">strdup(3)</A></STRONG>, <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="strlen.html">strlen(3)</A></STRONG>, <STRONG><A HREF="time.html">time(3)</A></STRONG>, and <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>.

       In  addition,  the  <EM>Db::open</EM>  method  may fail and throw a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for  the  following  condi-
       tions:


            There is a mismatch between  the  version  number  of
            <EM>file</EM> and the software.

            A  <EM>re</EM><STRONG>_</STRONG><EM>source</EM>  file  was  specified  with  either  the
            DB_THREAD flag or a non-NULL  <EM>tx</EM><STRONG>_</STRONG><EM>info</EM>  field  in  the
            DbEnv argument to <EM>Db::open</EM>.

       [ENOENT]
            A non-existent <EM>re</EM><STRONG>_</STRONG><EM>source</EM> file was specified.

       [EPERM]
            Database  corruption  was  detected.   All subsequent
            database calls (other  than  <EM>Db::close</EM>)  will  return
            EPERM.

       The  <EM>Db::close</EM>  method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>
       or return <EM>errno</EM> for any of the errors  specified  for  the
       following DB and library functions: Db::<STRONG><A HREF="sync.html">sync(3)</A></STRONG>,
       DbLock::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbLock::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="vec.html">vec(3)</A></STRONG>,
       DbLog::<STRONG><A HREF="db_register.html">db_register(3)</A></STRONG>, DbLog::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpool::<STRONG><A HREF="close.html">close(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="close.html">close(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="get.html">get(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="set.html">set(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="sync.html">sync(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>, <STRONG><A HREF="close.html">close(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>,
       <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memmove.html">memmove(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="munmap.html">munmap(2)</A></STRONG>,
       <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>, and <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>.

       The <EM>Db::cursor</EM> method may fail and throw a  <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>
       or  return  <EM>errno</EM>  for any of the errors specified for the
       following DB and library functions: <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>.

       In addition, the <EM>Db::cursor</EM> method may fail  and  throw  a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or  return  <EM>errno</EM> for the following condi-
       tions:

       [EINVAL]
            An invalid flag value or parameter was specified.

       [EPERM]
            Database corruption  was  detected.   All  subsequent
            database  calls  (other  than  <EM>Db::close</EM>) will return
            EPERM.

       The <EM>Db::del</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG>  or
       return  <EM>errno</EM> for any of the errors specified for the fol-
       lowing DB and library functions: DbLock::<STRONG><A HREF="get.html">get(3)</A></STRONG>,
       DbLock::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="id.html">id(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="vec.html">vec(3)</A></STRONG>,
       DbLog::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="put.html">put(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="set.html">set(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>,
       <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcmp.html">memcmp(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memmove.html">memmove(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>,
       <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>, and <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>.

       In addition, the <EM>Db::del</EM> method may fail and throw a <EM>DbEx-</EM>
       <STRONG><A HREF="ception.html">ception(3)</A></STRONG> or return <EM>errno</EM> for the following conditions:
       In addition, the <EM>Db::fd</EM> method may fail and throw a  <EM>DbEx-</EM>
       <STRONG><A HREF="ception.html">ception(3)</A></STRONG> or return <EM>errno</EM> for the following conditions:


       [ENOENT]
            The   <EM>Db::fd</EM>  method  was  called  for  an  in-memory
            database, or no underlying file has yet been created.

       [EPERM]
            Database  corruption  was  detected.   All subsequent
            database calls (other  than  <EM>Db::close</EM>)  will  return
            EPERM.

       The  <EM>Db::get</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or
       return <EM>errno</EM> for any of the errors specified for the  fol-
       lowing DB and library functions: DbLock::<STRONG><A HREF="get.html">get(3)</A></STRONG>,
       DbLock::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="id.html">id(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="vec.html">vec(3)</A></STRONG>,
       DbLog::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="put.html">put(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="set.html">set(3)</A></STRONG>, Dbc::<STRONG><A HREF="get.html">get(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>,
       <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcmp.html">memcmp(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memmove.html">memmove(3)</A></STRONG>,
       <STRONG><A HREF="memset.html">memset(3)</A></STRONG>, <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>, and <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>.

       In addition, the <EM>Db::get</EM> method may fail and throw a <EM>DbEx-</EM>
       <STRONG><A HREF="ception.html">ception(3)</A></STRONG> or return <EM>errno</EM> for the following conditions:

       [EAGAIN]
            A lock was unavailable.

       [EINVAL]
            An invalid flag value or parameter was specified.

            The  DB_THREAD  flag was specified to the <EM>Db::</EM><STRONG><A HREF="open.html">open(3)</A></STRONG>
            method and neither the DB_DBT_MALLOC or  DB_DBT_USER-
            MEM flags were set in the Dbt.

            A record number of 0 was specified.

       [EPERM]
            Database  corruption  was  detected.   All subsequent
            database calls (other  than  <EM>Db::close</EM>)  will  return
            EPERM.

       The  <EM>Db::put</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or
       return <EM>errno</EM> for any of the errors specified for the  fol-
       lowing DB and library functions: DbLock::<STRONG><A HREF="get.html">get(3)</A></STRONG>,
       DbLock::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="id.html">id(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="vec.html">vec(3)</A></STRONG>,
       DbLog::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="put.html">put(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="set.html">set(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>, <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>,
       <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcmp.html">memcmp(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memmove.html">memmove(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>,
       <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>, and <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>.

       In addition, the <EM>Db::put</EM> method may fail and throw a <EM>DbEx-</EM>
       <STRONG><A HREF="ception.html">ception(3)</A></STRONG> or return <EM>errno</EM> for the following conditions:

            An attempt was made to add a record to a fixed-length
            database that was too large to fit.

            An attempt was made to do a partial put.

       [EPERM]
            Database corruption  was  detected.   All  subsequent
            database  calls  (other  than  <EM>Db::close</EM>) will return
            EPERM.

       [ENOSPC]
            A btree exceeded the maximum btree depth (255).

       The <EM>Db::stat</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or
       return  <EM>errno</EM> for any of the errors specified for the fol-
       lowing DB and library functions: DbLock::<STRONG><A HREF="get.html">get(3)</A></STRONG>,
       DbLock::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="id.html">id(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="vec.html">vec(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="put.html">put(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>,
       <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>,  <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, and <STRONG><A HREF="memset.html">memset(3)</A></STRONG>.

       The <EM>Db::sync</EM> method may fail and throw a <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or
       return  <EM>errno</EM> for any of the errors specified for the fol-
       lowing DB and library functions: Db::<STRONG><A HREF="get.html">get(3)</A></STRONG>, Db::<STRONG><A HREF="sync.html">sync(3)</A></STRONG>,
       DbLock::<STRONG><A HREF="get.html">get(3)</A></STRONG>, DbLock::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbLockTab::<STRONG><A HREF="id.html">id(3)</A></STRONG>,
       DbLockTab::<STRONG><A HREF="vec.html">vec(3)</A></STRONG>, DbLog::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="get.html">get(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="put.html">put(3)</A></STRONG>, DbMpoolFile::<STRONG><A HREF="set.html">set(3)</A></STRONG>,
       DbMpoolFile::<STRONG><A HREF="sync.html">sync(3)</A></STRONG>, <STRONG><A HREF="calloc.html">calloc(3)</A></STRONG>, <STRONG><A HREF="close.html">close(2)</A></STRONG>, <STRONG><A HREF="fcntl.html">fcntl(2)</A></STRONG>,
       <STRONG><A HREF="fflush.html">fflush(3)</A></STRONG>, <STRONG><A HREF="malloc.html">malloc(3)</A></STRONG>, <STRONG><A HREF="memcpy.html">memcpy(3)</A></STRONG>, <STRONG><A HREF="memmove.html">memmove(3)</A></STRONG>, <STRONG><A HREF="memset.html">memset(3)</A></STRONG>,
       <STRONG><A HREF="munmap.html">munmap(2)</A></STRONG>, <STRONG><A HREF="open.html">open(2)</A></STRONG>, <STRONG><A HREF="realloc.html">realloc(3)</A></STRONG>, <STRONG><A HREF="strerror.html">strerror(3)</A></STRONG>, <STRONG><A HREF="unlink.html">unlink(2)</A></STRONG>,
       and <STRONG><A HREF="write.html">write(2)</A></STRONG>.

       In  addition,  the  <EM>Db::sync</EM>  method  may fail and throw a
       <STRONG><A HREF="DbException.html">DbException(3)</A></STRONG> or return <EM>errno</EM> for  the  following  condi-
       tions:

       [EINVAL]
            An invalid flag value or parameter was specified.

       [EPERM]
            Database  corruption  was  detected.   All subsequent
            database calls (other  than  <EM>Db::close</EM>)  will  return
            EPERM.


</PRE>
<H2>SEE ALSO</H2><PRE>
       <EM>The</EM>  <EM>Ubiquitous</EM>  <EM>B-tree</EM>,  Douglas Comer, ACM Comput. Surv.
       11, 2 (June 1979), 121-138.
       <EM>Prefix</EM> <EM>B-trees</EM>, Bayer and Unterauer, ACM  Transactions  on
       Database Systems, Vol. 2, 1 (March 1977), 11-26.

       <EM>The</EM>  <EM>Art</EM>  <EM>of</EM>  <EM>Computer</EM>  <EM>Programming</EM>  <EM>Vol.</EM>  <EM>3:</EM>  <EM>Sorting</EM> <EM>and</EM>
       <EM>Searching</EM>, D.E. Knuth, 1968, pp 471-480.

       <EM>Dynamic</EM> <EM>Hash</EM> <EM>Tables</EM>, Per-Ake Larson, Communications of the
       ACM, April 1988.
       <STRONG><A HREF="DbLock.html">DbLock(3)</A></STRONG>, <STRONG><A HREF="DbLocktab.html">DbLocktab(3)</A></STRONG>, <STRONG><A HREF="DbLog.html">DbLog(3)</A></STRONG>, <STRONG><A HREF="DbLsn.html">DbLsn(3)</A></STRONG>, <STRONG><A HREF="DbMpool.html">DbMpool(3)</A></STRONG>,
       <STRONG><A HREF="DbMpoolFile.html">DbMpoolFile(3)</A></STRONG>, <STRONG><A HREF="Dbt.html">Dbt(3)</A></STRONG>, <STRONG><A HREF="DbTxn.html">DbTxn(3)</A></STRONG>, <STRONG><A HREF="DbTxnMgr.html">DbTxnMgr(3)</A></STRONG>
</PRE>
</BODY>
</HTML>
