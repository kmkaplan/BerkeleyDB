<!--$Id: intro.so,v 1.28 2003/10/27 15:52:47 merrells Exp $-->
<!--Copyright 1997-2003 by Sleepycat Software, Inc.-->
<!--All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB Reference Guide: Building Berkeley DB XML for Windows</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,b+tree,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,Java,C,C++">
</head>
<body bgcolor=white>
<a name="2"><!--meow--></a><a name="3"><!--meow--></a>
<table width="100%"><tr valign=top>
<td><h3><dl><dt>Berkeley DB Reference Guide:<dd>Building Berkeley DB XML for Windows systems</dl></h3></td>
<td align=right><a href="../../ref/xml_unix/notes.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../../reftoc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../../ref/xml_win/test.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p>
<h3 align=center>Building Berkeley DB XML for Windows</h3>
<p>If you are working with the release of Berkeley DB XML that includes prebuilt
binaries you do not need to build Berkeley DB XML.  If you are working with the
source release of Berkeley DB XML, or need to rebuild with different compiler
options, or need to rebuild with a different compiler, then follow the
build instructions below.</p>
<h3>Building Berkeley DB XML</h3>
<p>The build_win32 directory in the Berkeley DB XML distribution contains project
files for Microsoft Visual C++:</p>
<table border=1 align=center>
<tr><th>Project File</th><th>Description</th></tr>
<tr>    <td align=center>Berkeley_DB_XML.dsw</td>    <td align=center>Visual C++ 6.0 workspace</td>    </tr>
<tr>    <td align=center>*.dsp</td>    <td align=center>Visual C++ 6.0 projects</td>    </tr>
</table>
<p>These project files can be used to build Berkeley DB XML for any Win32
platform: Windows/XP, Windows/2000, Windows/NT, Windows/98 and
Windows/95.</p>
<p>Berkeley DB XML makes use of some third-party libraries.  Each of these
packages is freely available and distributable under an Open Source
license.  To build Berkeley DB XML, you will need the following third-party
libraries:</p>
<p><dl compact>
<p><dt><a href="http://www.sleepycat.com">Berkeley DB</a><dd>Berkeley DB is a general purpose database toolkit.
<p>This release of Berkeley DB XML requires Sleepycat Software's Berkeley DB 4.1.25
release or higher.  We recommend Berkeley DB 4.2.45. The project files
expect to find Berkeley DB in the Berkeley DB XML <b>lib/db-4.2.45</b> directory.</p>
</dl>
<p><dl compact>
<p><dt><a href="http://software.decisionsoft.com">Pathan</a><dd>Pathan implements the XPath 1.0 language specification.
<p>This release of Berkeley DB XML requires DecisionSoft's Pathan 1.2 release 2
release or higher.  The project files expect to find Pathan in the
Berkeley DB XML <b>lib/libpathan-1.2</b> directory.</p>
</dl>
<p><dl compact>
<p><dt><a href="http://xml.apache.org/xerces-c/index.html">Xerces-C++</a><dd>Xerces-C++ is the Apache implementation of DOM for C++.
<p>This release of Berkeley DB XML requires the Xerces C++ 2.3.0 release or newer.
The project files expect to find Xerces in the Berkeley DB XML
<b>lib/xerces-c-src2_3_0</b> directory.  To build Pathan from
source, you need to have a source release of Xerces, not just a binary
release.  It is simplest to download <b>xerces-c-src2_3_0.zip</b>
and unpack it into the <b>lib</b> directory.</p>
<p>Note that Xerces C++ tarballs may fail to compile on Windows due to
format problems with the Visual Studio project files.</p>
</dl>
<h3>Building with Microsoft Visual C++ 6.0</h3>
<p>To build all libraries from source, open the file
<b>build_win32/Berkeley_DB_XML.dsw</b>.
Next, select <i>Active Project Configuration</i> under the
<i>Build</i> pull-down menu.  For a debug version of the
libraries, tools, and examples, select <i>all -- Win32 Debug</i>.
Results from this build are put into <b>build_win32/Debug</b>.  For
a release version, select <i>all -- Win32 Release</i>; results are
put into <b>build_win32/Release</b>.  Finally, to build, select the
<i>Build</i> menu option under the <i>Build</i> pull-down
menu.</p>
<h3>Building with Microsoft Visual C++ .NET</h3>
<p>To open <b>build_win32/Berkeley_DB_XML.dsw</b> in Visual C++ .NET
choose <i>Open Solution</i> from the <i>File</i> menu.  Then choose
<i>Compatible Workspace Files</i> under <i>Files of type</i>.
After you select the workspace, you will be prompted to upgrade the
project files.  Choose <i>Yes to All</i>.  If the third party
packages are not located within the <b>lib/</b> directory then
Visual C++ .NET will complain that the project files for those
packages are corrupted.  Ignore these complaints.</p>
<p>Next, select <i>Configuration Manager</i> under the
<i>Build</i> pull-down menu.  For a debug version of the
libraries, tools, and examples, select <i>Debug</i>.
Results from this build are put into <b>build_win32/Debug</b>.  For
a release version, select <i>Release</i>; results are
put into <b>build_win32/Release</b>.  Finally, to build, select the
<i>Build all</i> menu option under the <i>Build</i> pull-down
menu.</p>
<h3>Building with third-party libraries in other directories</h3>
<p>Berkeley DB XML can be built with third-party libraries that are not located in
the Berkeley DB XML <b>lib/</b> directory. In Visual C++ open the
Tools/Options tabbed dialog for adding directories. Add the include
and library paths for the third-party libraries located elsewhere.
To do this, select <i>Options...</i> from the <i>Tools</i>
pull-down menu.  In Visual C++ 6.0, a tabbed dialog should appear.
Choose the <i>Directories</i> tab in the dialog, and for the
<i>Platform</i>, select <i>Win32</i>.  In Visual C++ .NET, a
different window appears.  Choose <i>Projects</i>, then
<i>VC++ Directories</i>.</p>
<p>In either case, use <i>Include files</i> under <i>Show
directories for</i> to add include directories, and <i>Library
files</i> for library paths.</p>
<p>For Berkeley DB add the include paths <b>db-&lt;version&gt;</b>,
<b>db-&lt;version&gt;/build_win32</b> and
<b>db-&lt;version&gt;/dbinc</b>. Then add the library paths
<b>db-&lt;version&gt;/build_win32/Debug</b> and
<b>db-&lt;version&gt;/build_win32/Release</b>.</p>
<p>For the binary release of Xerces add the include path
<b>xerces-c-&lt;version&gt;/include</b> and for the source or
CVS release add <b>xerces-c-&lt;version&gt;/src</b>.  Then for
the binary release of Xerces add the library path
<b>xerces-c-&lt;version&gt;/lib</b>, and for the source or CVS
release add the appropriate build directory for your compiler, eg.
<b>xerces-c-&lt;version&gt;/build/win32/vc6/debug</b> and
<b>xerces-c-&lt;version&gt;/build/win32/vc6/release</b>.</p>
<p>The dbxml_java project includes a Custom Build Step that includes
the path to the Berkeley DB .jar file twice. These must be changed to
<b>db-&lt;version&gt;/build_win32/debug/db.jar</b> for the
Debug configuration, and to
<b>db-&lt;version&gt;/build_win32/release/db.jar</b> for the
Release configuration.</p>
<h3>Building the Java API</h3>
<p>The DB XML Java API is not built automatically.  The following
instructions assume that you have installed the Sun Java Development
Kit in <b>d:/java</b>.  Of course, if you installed elsewhere or have
different Java software, you will need to adjust the pathnames
accordingly.</p>
<p>Use the previous instructions for Visual C++ to open the
<i>Tools/Options</i> window for adding these include directories:
<b>d:/java/include</b> and <b>d:/java/include/win32</b>.  These
are the directories needed when including <b>jni.h</b>.  Now, before
clicking OK, choose <i>Executable files</i> under <i>Show
directories for</i>.  Add <b>d:/java/bin</b>.  That directory is needed
to find javac.  Now select OK. Ensure that you have the
<b>CLASSPATH</b> environment variable defined. At a minimum it
should have the value ".", the current directory.</p>
<p>To build the DB XML Java API select <i>Active Project
Configuration</i> under the <i>Build</i> pull-down menu.  Choose
<i>dbxml_java -- Win32 Release</i>.  To build, select
<i>Build dbxml_java.dll</i> under the <i>Build</i> pull-down
menu.  This builds the Java support library for Berkeley DB XML and compiles all
the java files, placing the resulting <b>dbxml.jar</b> and
<b>dbxmlexamples.jar</b> files in the <b>build_win32/Release</b>
subdirectory of Berkeley DB XML.</p>
<p>In Visual C++ .NET, set the build type to <i>Release</i> in the drop
down list on the toolbar, then right-click on <i>dbxml_java</i> and
choose <i>Build</i>.</p>
<p>To make use of the Berkeley DB XML Java API set your environment variable
<b>CLASSPATH</b> to include the full pathname of the
<b>dbxml.jar</b> and <b>dbxmlexamples.jar</b> files, as well as the
<b>db.jar</b> file from Berkeley DB, and your environment variable
<b>PATH</b> to include the <b>build_win32/Release</b>
subdirectory.  On Windows, remember that files or directories in the
<b>CLASSPATH</b> and <b>PATH</b> variables must be separated by
semicolons (unlike UNIX).  Then, try running the following command as
a test:</p>
<blockquote><pre>java com.sleepycat.dbxml.examples.Example1</pre></blockquote>
<p>If you want to run Java code using a Debug build, it is slightly more
complicated.  Make sure you build the Debug version of
<i>dbxml_java</i> instead of the Release version.  Also make sure
that your <b>PATH</b> contains <b>build_win32/Debug</b>.  Then run
the following (as one command):</p>
<blockquote><pre>java -Dsleepycat.db.libname=libdb_java42d com.sleepycat.dbxml.examples.Example1</pre></blockquote>
<h3>Building the Tcl API</h3>
<p>Tcl support is not built automatically.  See
<a href="../../ref/tcl/intro.html">Loading Berkeley DB XML with Tcl</a> for information
on sites from which you can download Tcl and which Tcl versions are
compatible with Berkeley DB XML.</p>
<p>The Tcl library must be built as the same build type as the Berkeley DB
library (both Release or both Debug).  We found that the binary release
of Tcl can be used with the Release configuration of Berkeley DB, but you will
need to need to build Tcl from sources for the Debug configuration.</p>
<p>These notes assume that Tcl is installed as <b>d:/tcl</b>, but you can
change that if you want.  If you run using a version of Tcl different
from the one currently being used by Sleepycat Software, you will need
to change the name of the Tcl library used in the build (for example,
<b>tcl83d.lib</b>) to the appropriate name.  See
Projects-&gt;Settings-&gt;Link in the dbxml_tcl subproject.</p>
<p>Use the previous instructions for Visual C++ to open the
<i>Tools/Options</i> window for adding include directories.  In
addition to the directories specified previously, add
<b>d:/tcl/include</b>.  This is the directory that contains
<b>tcl.h</b>.  Then, in that same window, choose <i>Library
Files</i> under <i>Show directories for</i>.  Add <b>d:/tcl/lib</b>
(or whatever directory contains <b>tcl83d.lib</b> in your
distribution) to the list.  Now, select OK.</p>
<p>In Visual C++ 6.0, select <i>Active Project Configuration</i> under
the <i>Build</i> pull-down menu.  Choose <i>dbxml_tcl --
Win32 Release</i>.  To build, select <i>Build
libdbxml_tcl.dll</i> under the <i>Build</i>
pull-down menu.  This builds the Tcl support library for Berkeley DB, placing
the result into
<b>build_win32/Release/libdbxml_tcl.dll</b>.
Selecting an Active Configuration of <i>dbxml_tcl -- Win32 Debug</i>
will build a debug version, placing the result into
<b>build_win32/Debug/libdbxml_tcld.dll</b>.</p>
<p>In Visual C++ .NET, choose the build type (<i>Debug</i> or
<i>Release</i>) from the drop down list on the toolbar, then
right-click on <i>dbxml_tcl</i> and choose <i>Build</i>.</p>
<h3>Reporting problems</h3>
<p>If you have trouble with any of these commands, please send email to
the support addresses found in the Sleepycat Software contact
information.  In that email, please include the following
information:</p>
<p><ul type=disc>
<li>The version of Berkeley DB XML you are trying to build.
<li>The name and version of the C++ compiler you are using.
<li>The name and version of the operating system you are using.
<li>A cut and paste of any error messages generated by the
compiler.
</ul>
<table width="100%"><tr><td><br></td><td align=right><a href="../../ref/xml_unix/notes.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../../reftoc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../../ref/xml_win/test.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p><font size=1><a href="../../sleepycat/legal.html">Copyright (c) 1996-2003</a> <a href="http://www.sleepycat.com">Sleepycat Software, Inc.</a> - All rights reserved.</font>
</body>
</html>
