<!--$Id: intro.so,v 1.21 2003/10/27 15:52:47 merrells Exp $-->
<!--Copyright 1997-2003 by Sleepycat Software, Inc.-->
<!--All rights reserved.-->
<!--See the file LICENSE for redistribution information.-->
<html>
<head>
<title>Berkeley DB Reference Guide: Building Berkeley DB XML for UNIX/POSIX</title>
<meta name="description" content="Berkeley DB: An embedded database programmatic toolkit.">
<meta name="keywords" content="embedded,database,programmatic,toolkit,b+tree,btree,hash,hashing,transaction,transactions,locking,logging,access method,access methods,Java,C,C++">
</head>
<body bgcolor=white>
<a name="2"><!--meow--></a><a name="3"><!--meow--></a>
<table width="100%"><tr valign=top>
<td><h3><dl><dt>Berkeley DB Reference Guide:<dd>Building Berkeley DB XML for UNIX/POSIX systems</dl></h3></td>
<td align=right><a href="../../ref/build_vxworks/faq.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../../reftoc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../../ref/xml_unix/conf.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p>
<h3 align=center>Building Berkeley DB XML for UNIX/POSIX</h3>
<p>The Berkeley DB XML distribution builds up to three separate libraries: the
base C++ API Berkeley DB XML library and the optional Java API and Tcl test
libraries.  Building for Linux and Mac OS X is the same as building
for a conventional UNIX platform</p>
<p>The Berkeley DB XML distribution uses the Free Software Foundation's
<a href="http://www.gnu.org/software/autoconf/autoconf.html">autoconf</a> and
<a href="http://www.gnu.org/software/libtool/libtool.html">libtool</a>
tools to build on UNIX platforms.  In general, the standard
configuration and installation options for these tools apply to the
Berkeley DB XML distribution.</p>
<h3>Preparing to build</h3>
<p>Berkeley DB XML makes use of several third-party libraries.  You can build
Berkeley DB XML using installed versions of these libraries, or you can build
Berkeley DB XML using the standard distributions of these libraries which have
been built but not installed.  Each of these packages is freely
available and distributable under an Open Source license.  To build
Berkeley DB XML, you will need the following third-party libraries:</p>
<p><dl compact>
<p><dt><a href="http://www.sleepycat.com">Berkeley DB</a><dd>Berkeley DB is a general purpose database toolkit.  This release of Berkeley DB XML
requires Sleepycat Software's Berkeley DB 4.1.25 release or higher. We
recommend Berkeley DB 4.2.45.
<p>
When you build Berkeley DB, you must specify the --enable-cxx configuration
option, so the minimal build commands for Berkeley DB are:
<blockquote><pre>cd dbxml-./lib/db-4.2.45/build_unix
../dist/configure --enable-cxx
make
make install</pre></blockquote></p>
<p>This will install Berkeley DB in <b>/usr/local/BerkeleyDB.4.2</b>.  If you
want to install in a different directory, add
<i>--prefix=/path/to/install</i> to the configure line.</p>
<p>If you want to use the Berkeley DB XML Java API, you must also build Berkeley DB with
Java support by adding <i>--enable-java</i> to the configure
line.</p>
<p><dt><a href="http://xml.apache.org/xerces-c/index.html">Xerces</a><dd>Xerces is the Apache implementation of DOM.  The build requires a source
release of Xerces, not just a binary release.  This release of Berkeley DB XML
requires the Xerces 2.3.0 release or newer.
<p>The Bourne shell build commands we use for Xerces are:
<blockquote><pre>cd dbxml-./lib/xerces-c-src2_3_0
export XERCESCROOT=`pwd`
cd src/xercesc
./runConfigure -plinux -d -cgcc -xg++ -minmem -nsocket -tnative -rnone
make
make install</pre></blockquote></p>
<p>You may have to adjust your system type and compiler information, of
course.</p>
<p>This will install Xerces under <b>/usr/local</b>.  If you want to
install in a different directory, add
<i>-P/path/to/install</i> to the configure line.</p>
<p><dt><a href="http://software.decisionsoft.com">Pathan</a><dd>Pathan is an XPath 1.0 to Xerces DOM implementation.  Berkeley DB XML requires
Pathan 1.2 release 2 from DecisionSoft.
<p>If there is a binary release of Pathan for your platform, feel free to
use that.  Otherwise, you will need to build Pathan from source, which
requires GNU make, so you will need to install GNU make if you don't
already have it on your system.</p>
<p>The Bourne shell build command we use for Pathan is:</p>
<blockquote><pre># Keep XERCESCROOT from the Xerces build above
cd dbxml-./lib/libpathan-1.2
./runConfigure
gmake
gmake install</pre></blockquote>
<p>This will install Pathan under <b>/usr/local</b>.  If you want to
install in a different directory, add
<i>--prefix=/path/to/install</i> to the configure line.</p>
</dl>
<h3>Configuring and building Berkeley DB XML</h3>
<p>The <a href="../../ref/xml_unix/conf.html">--with-berkeleydb</a>,
<a href="../../ref/xml_unix/conf.html">--with-pathan</a> and
<a href="../../ref/xml_unix/conf.html">--with-xerces</a> configuration
options can be used to specify the location of the install trees.
Alternatively, the CFLAGS, LDFLAGS and other standard environment
variables can be used to specify the location of the already installed
include and library files.</p>
<p>To do a standard UNIX build of Berkeley DB XML using standard distributions of
the third-party libraries, change to the <b>build_unix</b> directory
and then enter the following two commands, adjust the paths as
necessary:</p>
<blockquote><pre>cd dbxml-./build_unix
../dist/configure
make</pre></blockquote>
<p>If you have changed the locations where Berkeley DB, Pathan or Xerces are
installed from the defaults, add the arguments
<i>--with-berkeleydb=/path/to/db</i>,
<i>--with-pathan=/path/to/pathan</i> and/or
<i>--with-xerces=/path/to/xerces</i> to configure.</p>
<p>By default, Berkeley DB XML is installed in
<b>/usr/local/BerkeleyDBXML..</b>.  To change
that, add <i>--prefix=/path/to/install</i> to configure.  To install
the Berkeley DB XML library, enter the following command:</p>
<blockquote><pre>make install</pre></blockquote>
<p>To rebuild Berkeley DB XML, enter:</p>
<blockquote><pre>make clean
make</pre></blockquote>
<p>If you change your mind about how Berkeley DB XML is to be configured, you must
start from scratch by entering the following command:</p>
<blockquote><pre>make distclean
../dist/configure
make</pre></blockquote>
<p>To build multiple UNIX versions of Berkeley DB XML in the same source tree,
create a new directory at the same level as the build_unix directory,
and then configure and build in that directory as described
previously.</p>
<h3>Building the Java API</h3>
<p>To build the DB XML Java API, make sure there is a working
<b>javac</b> in your <b>PATH</b>, and specify
<i>--enable-java</i> when running both the Berkeley DB and Berkeley DB XML
configure scripts.  When you run <i>make</i>, the Java support
library for Berkeley DB XML will be built, resulting in <b>dbxml.jar</b> and
<b>dbxmlexamples.jar</b> files in your build directory.</p>
<p>To make use of the DB XML Java API set your environment variable
<b>CLASSPATH</b> to include the full pathname of the
<b>dbxml.jar</b> and <b>dbxmlexamples.jar</b> files, as well as
the <b>db.jar</b> file from Berkeley DB, and your environment variable
<b>LD_LIBRARY_PATH</b> to include the <b>.libs</b> subdirectory
of your build directory.  Then, try running the following command as a
test:</p>
<blockquote><pre>java com.sleepycat.dbxml.examples.Example1</pre></blockquote>
<h3>Reporting problems</h3>
<p>If you have trouble with any of these commands, please send email to
the support addresses found in the Sleepycat Software contact
information.  In that email, please include the following
information:</p>
<p><ul type=disc>
<li>The version of Berkeley DB XML you are trying to build.
<li>The name and version of the C++ compiler you are using.  If you are
running g++, the output from running <i>g++ --version</i>.
<li>The name and version of the operating system you are using, including
the output from running <i>uname -a</i>.
<li>A screen snapshot of the commands you entered to do configuration and
compilation, and any output they produced.
<li>A copy of the <b>config.log</b> file created during configuration.
</ul>
<table width="100%"><tr><td><br></td><td align=right><a href="../../ref/build_vxworks/faq.html"><img src="../../images/prev.gif" alt="Prev"></a><a href="../../reftoc.html"><img src="../../images/ref.gif" alt="Ref"></a><a href="../../ref/xml_unix/conf.html"><img src="../../images/next.gif" alt="Next"></a>
</td></tr></table>
<p><font size=1><a href="../../sleepycat/legal.html">Copyright (c) 1996-2003</a> <a href="http://www.sleepycat.com">Sleepycat Software, Inc.</a> - All rights reserved.</font>
</body>
</html>
